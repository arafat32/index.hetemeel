!function(){var t={79525:function(t,e){"use strict";e.Z={data:function(){return{locale:document.documentElement.lang||"ru",defaultLocale:"ru"}},computed:{l:function(){return window.l},lp:function(){return window.lp},siteLang:function(){return document.documentElement.lang},isDefaultLang:function(){return this.siteLang===this.defaultLocale},isEn:function(){return"en"===this.siteLang},isEs:function(){return"es"===this.siteLang},isFr:function(){return"fr"===this.siteLang}},methods:{forceLocale:function(t){this.locale=t}}}},93629:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var i={data:function(){return{}},props:{breadcrumbs:{type:Array,default:function(){return[]}},breadcrumbLabel:{type:String,default:"label"}},methods:{followBreadcrumb:function(t){this.$emit("input",t)},isBreadcrumbActive:function(t){return!(t==this.breadcrumbs.length-1)}}},s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"breadcrumbs"},[n("span",{on:{click:function(e){return t.followBreadcrumb(null)}}},[t._t("home",(function(){return[n("i",{staticClass:"fa fa-home home-button",attrs:{"aria-hidden":"true"}})]}))],2),t._l(t.breadcrumbs,(function(e,i){return n("span",{staticClass:"breadcrumb"},[n("div",{staticClass:"delimiter",class:{first:0==i}}),t.isBreadcrumbActive(i)?n("span",{staticClass:"active",on:{click:function(n){return n.preventDefault(),t.followBreadcrumb(e)}}},[t._v(t._s(e[t.breadcrumbLabel]))]):n("span",{staticClass:"inactive"},[t._v(t._s(e[t.breadcrumbLabel]))])])}))],2)}),[],!1,null,null,null).exports},51137:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var i={mixins:[n(79525).Z],data:function(){return{search:"",searchOnInput:!0}},props:["role","initialSearch"],watch:{search:function(t){this.searchOnInput?this.onInput():this.searchOnInput=!0}},created:function(){var t=this;this.debouncedInput=_.debounce((function(){t.findArticles()}),350),this.setSearch(this.initialSearch)},methods:{findArticles:function(){var t=this;""!=this.search?this.search.replace(" ","").length<3||(this.axiosRequest=axios.CancelToken.source(),axios.post("/quick-faq/search",{role:this.role.id,query:this.search},{cancelToken:this.axiosRequest.token}).then((function(e){t.$emit("input",{search:t.search,foundArticles:e.data.data.articles})})).catch((function(t){}))):this.$emit("input",{search:"",foundArticles:null})},onInput:function(){this.debouncedInput()},setSearch:function(t){this.searchOnInput=!1,this.search=t},stopAsyncProcesses:function(){this.debouncedInput.cancel(),this.axiosRequest&&this.axiosRequest.cancel()}}},s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchInput",class:{"has-text":""!=t.search},attrs:{type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),n("div",{staticClass:"placeholder"},[n("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v(t._s(t.l("legacyTranslation1","components/quick-faq/quick-faq-search")))])])])}),[],!1,null,null,null).exports},91419:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var i={mixins:[{data:function(){return{element:null,childElement:null,emitEventOnElementChange:!0}},props:{tree:{type:Array,default:function(){return[]}},value:{default:null},elementLabel:{type:String,default:"name"},elementKey:{type:String,default:"id"},elementParentKey:{type:String,default:"parent_id"},customSort:{type:Function,default:function(t){return t}},parentId:{default:null},level:{default:1},disableInputEventOnParentChangeValue:{type:Boolean,default:!1}},computed:{parentElement:function(){return _.find(this.tree,[this.elementKey,this.parentId])},hasChilds:function(){return _.findIndex(this.tree,[this.elementParentKey,this.parentId])>=0},options:function(){var t=this,e=_.filter(this.tree,(function(e){return e[t.elementParentKey]==t.parentId}));return e=this.customSort(e),this.element&&-1==_.findIndex(e,[this.elementKey,this.element[this.elementKey]])&&(this.element=null),e}},watch:{element:function(t,e){this.element?this.value?-1==this.getPath(this.value).indexOf(this.element[this.elementKey])&&this.$emit(this.getEventName(),this.element):this.$emit(this.getEventName(),this.element):this.disableInputEventOnParentChangeValue?this.emitEventOnElementChange?this.$emit(this.getEventName(),this.element):this.emitEventOnElementChange=!0:this.$emit(this.getEventName(),this.element)},value:function(t){this.selectValue()}},mounted:function(){this.selectValue()},methods:{selectValue:function(){if(this.disableInputEventOnParentChangeValue&&(this.emitEventOnElementChange=!1,this.element=null),this.value){var t=this.getPath(this.value),e=this;_.forEach(t,(function(t){var n=_.find(e.tree,[e.elementKey,t]);void 0!==n&&n[e.elementParentKey]==e.parentId&&(e.element=n)}))}},clearValue:function(){this.element=null},childElementChanged:function(t){t?this.$emit(this.getEventName(),t):this.$emit(this.getEventName(),this.element)},getPath:function(t){var e=[];if(!t)return e;e.push(t[this.elementKey]);for(var n=t[this.elementParentKey];n;){var i=_.find(this.tree,[this.elementKey,n]);e.push(i[this.elementKey]),n=i[this.elementParentKey]}return e},getPathElements:function(t){var e=this.getPath(t),n=[],i=this;return _.forEach(e,(function(t){var e=_.find(i.tree,[i.elementKey,t]);n.push(e)})),n},getEventName:function(){return this.parentId?"change":"input"},isSelected:function(t){return this.element&&t[this.elementKey]==this.element[this.elementKey]},isLast:function(t){return _.findIndex(this.options,[this.elementKey,t[this.elementKey]])==this.options.length-1},getHasChilds:function(t){return!t||_.findIndex(this.tree,[this.elementParentKey,t[this.elementKey]])>=0}}}],data:function(){return{}},props:{useAltQuestion:{type:Boolean,default:!1}},methods:{selectArticle:function(t){this.$emit("input",t)}}},s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"articles"},t._l(t.options,(function(e){return n("div",{staticClass:"article-header",on:{click:function(n){return t.selectArticle(e)}}},[n("div",{staticClass:"article-title"},[n("span",[t._v(t._s(t.useAltQuestion?e.alt_question:e.question))])]),t._v(" "),t.getHasChilds(e)?n("div",{staticClass:"goto-childs-icon"}):t._e()])})),0)}),[],!1,null,null,null).exports},78450:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a={computed:{filteredArticles:function(){var t=[this.role.id],e=_.filter(this.articles,(function(e){return 0==_.difference(t,e.role_ids).length}));if(this.currentAppId){var n=-1==this.currentAppId?1:this.currentAppId;e=e.filter((function(t){return t.app_id==n}))}return e},filteredFrequencyArticles:function(){var t=this,e=this.filteredArticles;return _.map(e,(function(e){var n=_.filter(t.apps,(function(t){return t.id===e.app_id}));return n.length>0&&(n=n[0]),s(s({},e),{},{question:null===e.parent?"[".concat(n.name,"] ").concat(e.question):e.question})}))}},methods:{customArticlesSort:function(t){var e=this;return t=_.sortBy(t,[function(t){return t.order[e.role.id]}])}}},c=n(79525);Vue.component("quick-faq-tree-select",n(91419).Z),Vue.component("breadcrumbs",n(93629).Z),Vue.component("quick-faq-search",n(51137).Z);var o={mixins:[a,c.Z],data:function(){return{role:null,articles:[],article:null,has_childs:!0,path:[],foundArticles:null,search:"",initialSearch:"",featuredArticles:[],history:[],axiosRequest:null,shown:!1,loaded:!1}},computed:{showSearchResults:function(){return null!==this.foundArticles},showSearchArticles:function(){return this.showSearchResults&&this.foundArticles.length>0},showSearchNotFoundMessage:function(){return this.showSearchResults&&0==this.foundArticles.length},showFeaturedArticles:function(){return null===this.article&&!this.showSearchResults||this.showSearchNotFoundMessage},showBreadcrumbs:function(){return null!==this.article&&!this.showSearchResults},showTree:function(){return this.has_childs&&!this.showSearchResults},showArticle:function(){return!this.has_childs&&!this.showSearchResults},filteredFeaturedArticles:function(){var t=this.featuredArticles,e=this.getFlatArticleListByIds(t),n=this;return _.forEach(e,(function(t){if(t.has_childs.indexOf(n.role.id)>=0){var i=_.cloneDeep(t);i.parent_id=i.id,i.id=-i.id,e.push(i)}})),e}},watch:{article:function(){this.has_childs=this.getHasChilds(this.article),this.path=this.getPath(this.article)}},created:function(){var t=this,e=this;window.bus.$on("quickFaqHyperlinkClicked",(function(t){e.onHyperlinkClicked(t)})),axios.post("/quick-faq/init",{page:window.location.pathname.substring(1)}).then((function(e){if(e&&e.data&&e.data.data&&e.data.data.enabled){t.role=e.data.data.role;var n=e.data.data.articles,i=t;_.forEach(n,(function(t){t.alt_question=t.question,"Я - покупатель"!=t.question&&"Я - продавец"!=t.question&&"I Am a Buyer"!=t.question&&"I Am a Seller"!=t.question||t.parent&&(t.alt_question=t.parent.question)})),t.articles=n,t.featuredArticles=e.data.data.featuredArticles,_.forEach(t.articles,(function(t,e){if(t.answer_formatted){var n=t.answer_formatted.replace(/<a href="[^>]*?\?role=(\d+)&article=(\d+).*?">/g,"<a onClick='window.bus.$emit(\"quickFaqHyperlinkClicked\", [$1, $2])' href='#'>");i.articles[e].answer_formatted=n}}));var s=e.data.data.state;if(s&&!t.featuredArticles)if(t.setRoleById(s.role),""!=s.search){i=t;t.search=s.search,t.initialSearch=s.search,t.foundArticles=t.getFlatArticleListByIds(s.foundArticles)}else t.setArticleById(s.article);t.loaded=!0}})).catch((function(){}))},methods:{getHasChilds:function(t){return!t||_.findIndex(this.filteredArticles,["parent_id",t.id])>=0},getPath:function(t){if(!t)return[];var e=[];e.push(t);for(var n=t.parent_id;n;){var i=_.find(this.articles,["id",n]);e.push(i),n=i.parent_id}return e=e.reverse()},onArticleSelected:function(t){this.$refs.searchComponent.stopAsyncProcesses(),this.log(),this.setArticleById(t?t.id:null),this.clearSearch(),this.saveCurrentState(),$(".widget-body").scrollTop(0)},onRoleSelected:function(t){this.$refs.searchComponent.stopAsyncProcesses(),this.log(),this.role=t,this.clearSearch(),this.article=null,this.saveCurrentState(),$(".widget-body").scrollTop(0)},onHyperlinkClicked:function(t){var e=t[0],n=t[1];this.$refs.searchComponent.stopAsyncProcesses(),this.log(),this.setRoleById(e),this.setArticleById(n),this.clearSearch(),this.saveCurrentState(),$(".widget-body").scrollTop(0)},onSearch:function(t){this.log(),this.search=t.search,this.foundArticles=this.getFlatArticleListByIds(t.foundArticles),""!=this.search&&(this.article=null),this.saveCurrentState(),$(".widget-body").scrollTop(0)},back:function(){this.$refs.searchComponent.stopAsyncProcesses();var t=this.history.pop();this.saveState(t),this.setRoleById(t.role),""!=t.search?this.setSearch(t.search,t.foundArticles):(this.clearSearch(),this.setArticleById(t.article)),$(".widget-body").scrollTop(0)},log:function(){this.history.push(this.getCurrentState())},saveCurrentState:function(){this.saveState(this.getCurrentState())},saveState:function(t){axios.post("/quick-faq/log",{record:t}).then((function(t){}))},getCurrentState:function(){return{role:this.role.id,article:this.article?this.article.id:null,search:this.search,foundArticles:this.foundArticles?_.map(this.foundArticles,"id"):null}},clearSearch:function(){this.setSearch("",null)},setSearch:function(t,e){this.$refs.searchComponent.setSearch(t),this.search=t,this.foundArticles=this.getFlatArticleListByIds(e)},setRoleById:function(t){},setArticleById:function(t){this.article=t?_.find(this.articles,["id",t]):null},getFlatArticleListByIds:function(t){if(null===t)return null;var e=this,n=[];_.forEach(t,(function(t){var i=_.find(e.articles,["id",t]);i&&n.push(i)}));var i=_.cloneDeep(n);return _.forEach(i,(function(t){t.parent_id=null})),i},toggleWidget:function(){this.shown=!this.shown}}},l=(0,n(51900).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loaded?n("div",{staticClass:"quick-faq"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.shown,expression:"shown"}],staticClass:"widget"},[n("div",{staticClass:"widget-header"},[t.history.length>0?n("div",{staticClass:"back-wrapper",on:{click:t.back}},[n("div",{staticClass:"back"})]):t._e(),t._v(" "),n("div",{staticClass:"role-select"},[n("div",{staticClass:"selected-role"},[n("b",[t._v(t._s(t.l("legacyTranslation1","components/quick-faq")))])])]),t._v(" "),n("quick-faq-search",{ref:"searchComponent",attrs:{role:t.role,articles:t.articles,"initial-search":t.initialSearch},on:{input:t.onSearch}})],1),t._v(" "),n("div",{staticClass:"widget-body"},[n("breadcrumbs",{directives:[{name:"show",rawName:"v-show",value:t.showBreadcrumbs,expression:"showBreadcrumbs"}],attrs:{breadcrumbs:t.path,"breadcrumb-label":"question"},on:{input:t.onArticleSelected}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSearchArticles,expression:"showSearchArticles"}]},[n("div",{staticClass:"section-title"},[t._v("\n\t\t\t\t\t"+t._s(t.l("legacyTranslation2","components/quick-faq"))+' "'+t._s(t.search)+'"\n\t\t\t\t')]),t._v(" "),n("quick-faq-tree-select",{attrs:{tree:t.foundArticles,"use-alt-question":!0},on:{input:t.onArticleSelected}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSearchNotFoundMessage,expression:"showSearchNotFoundMessage"}],staticClass:"section-title"},[t._v("\n\t\t\t\t"+t._s(t.l("legacyTranslation3","components/quick-faq"))+"\n\t\t\t")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFeaturedArticles,expression:"showFeaturedArticles"}]},[n("div",{staticClass:"section-title"},[t._v("\n\t\t\t\t\t"+t._s(t.l("legacyTranslation4","components/quick-faq"))+"\n\t\t\t\t")]),t._v(" "),n("quick-faq-tree-select",{attrs:{tree:t.filteredFeaturedArticles,"use-alt-question":!0},on:{input:t.onArticleSelected}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTree,expression:"showTree"}]},[t.showFeaturedArticles?n("div",{staticClass:"section-title"},[t._v("\n\t\t\t\t\t"+t._s(t.l("legacyTranslation1","components/quick-faq"))+"\n\t\t\t\t")]):t._e(),t._v(" "),n("quick-faq-tree-select",{attrs:{tree:t.filteredArticles,"parent-id":t.article?t.article.id:null,customSort:t.customArticlesSort},on:{input:t.onArticleSelected}})],1),t._v(" "),t.showArticle?n("div",{staticClass:"article"},[n("div",{staticClass:"question"},[t._v(t._s(t.article.question))]),t._v(" "),n("div",{staticClass:"fr-view answer",domProps:{innerHTML:t._s(t.article.answer_formatted)}})]):t._e()],1)]),t._v(" "),n("div",{staticClass:"start-button",on:{click:t.toggleWidget}},[n("i",{staticClass:"fa",class:{"fa-question":!t.shown,"fa-times animate":t.shown},attrs:{"aria-hidden":"true",id:"testicon"}})])]):t._e()}),[],!1,null,null,null).exports},51900:function(t,e,n){"use strict";function i(t,e,n,i,s,r,a,c){var o,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),a?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=o):s&&(o=c?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),o)if(l.functional){l._injectStyles=o;var u=l.render;l.render=function(t,e){return o.call(e),u(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,o):[o]}return{exports:t,options:l}}n.d(e,{Z:function(){return i}})}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Object.defineProperty(n,"p",{get:function(){try{if("string"!=typeof chunkCdnUrl)throw new Error("WebpackRequireFrom: 'chunkCdnUrl' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return chunkCdnUrl}catch(t){return console.error(t),"/"}},set:function(t){console.warn("WebpackRequireFrom: something is trying to override webpack public path. Ignoring the new value"+t+".")}}),function(){Vue.component("quick-faq",n(78450).Z);new Vue({el:"#quick-faq"})}()}();
!function(){var e={84421:function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw s}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t),n.d(t,{default:function(){return s}});var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rangyRe=/(\<span[^]*?id="selectionBoundary[^>]*\>[^]*?<\/span\>)/gi,this.shortcode=[{reg:"&lt;3",code:"2764"},{reg:"&lt;/3",code:"1f494"},{reg:"8-\\)",code:"1f60e"},{reg:":\\|",code:"1f610"},{reg:":o\\)",code:"1f435"},{reg:";\\)",code:"1f609"},{reg:";-\\)",code:"1f609"},{reg:"=\\)",code:"1f603"},{reg:"=-\\)",code:"1f603"},{reg:":D",code:"1f601"},{reg:":-D",code:"1f601"},{reg:":&gt;",code:"1f606"},{reg:":-&gt;",code:"1f606"},{reg:":o",code:"1f62e"},{reg:":-o",code:"1f62e"},{reg:"&gt;:\\(",code:"1f620"},{reg:"&gt;:-\\(",code:"1f620"},{reg:":\\)",code:"1f642"},{reg:"\\(:",code:"1f642"},{reg:":-\\)",code:"1f642"},{reg:":\\(",code:"2639"},{reg:"\\):",code:"2639"},{reg:":-\\(",code:"2639"},{reg:":p",code:"1f61b"},{reg:":-p",code:"1f61b"},{reg:":b",code:"1f61b"},{reg:":-b",code:"1f61b"},{reg:";p",code:"1f61c"},{reg:";-p",code:"1f61c"},{reg:";b",code:"1f61c"},{reg:";-b",code:"1f61c"},{reg:":\\*",code:"1f48b"},{reg:":-\\*",code:"1f48b"},{reg:":/",code:"1f615"},{reg:":-/",code:"1f615"},{reg:":\\\\",code:"1f615"},{reg:":-\\\\",code:"1f615"},{reg:"D:",code:"1f627"}],this.UNICODE_EMOJI_REGEXP=new RegExp("[*#0-9]️?⃣|[©®]️?|[⏀-❿]|[⏀-⿏]([-])?️?|(?:〰|〽|㊗|㊙)️?|(?:\ud83c(?:[\udc00-\uddbf]️?|[\uddc0-\uddff]\ud83c[\uddc0-\uddff]|\udff4(\udb40[\udc00-\udcff])+|[\ude00-\udfff])|[\ud83d-\ud83f][\udc00-\udfff])(?:️|\ud83c[\udffb-\udfff])?|‍❤️‍\ud83c[\udc00-\udfff](‍\ud83d[\udc40-\udc7f])?|(‍\ud83d[\udc40-\udc7f]){2,3}","g")}var t,n,a;return t=e,(n=[{key:"replaceCodeToEmoje",value:function(e){var t,n=e,a=o(this.shortcode);try{for(a.s();!(t=a.n()).done;){var i=t.value;n=n.replace(new RegExp("( |&nbsp;|>)"+i.reg+"( |&nbsp;|</|<br)","g"),"$1"+this.templateImgEmoji(i.code)+"$2")}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"templateImgEmoji",value:function(e){return'<img class="message-emoji message-emoji_'.concat(e,'" src="').concat(Utils.cdnImageUrl("/emoji/".concat(e,".svg")),'" alt="&#x').concat(e,';" />')}},{key:"divImgToImgDiv",value:function(e){var t=/(\<br[^>]*><\/div\>|<\/div\>)(\<img[^>]*\>)/gi;return e=e.replace(t,"$2$1"),t=/(\<br[^>]*><\/div\>|<\/div\>)(\<span[^]*?id="selectionBoundary[^>]*\>[^]*?<\/span\>)/gi,e.replace(t,"$2$1")}},{key:"clearAttrs",value:function(e){var t=e,n=/alt="[^"]*"/gi;return t=t.replace(n,'alt=""'),n=/draggable="[^"]*"/gi,t=t.replace(n,"")}},{key:"cutCaret",value:function(e){var t=this.rangyRe.exec(e);return t?t.html=e.replace(this.rangyRe,""):t={html:e},t}},{key:"hasCaret",value:function(e){return this.rangyRe.test(e)}},{key:"insertBeforeCaret",value:function(e,t){return e.replace(this.rangyRe,t+"$1")}},{key:"insertCaret",value:function(e,t){if(void 0===e.index)return t;var n=t,o=(n=n.substring(e.index)).search("<"),a=n.search(">"),i=e.index;return(a<o||-1==o&&-1!=a)&&(i=i+a+1),n=t.substring(0,i)+e[0]+t.substring(i)}},{key:"preSubmitMessage",value:function(e){var t=this.imgToShortcode(e),n=new RegExp("<div[^>]*><br[^>]*></div>","g");return t=(t=t.replace(n,"\n")).replace(/\u2028|&(.*?)#8232;/g,"\n"),n=new RegExp("<br[^>]*>(</div>)","g"),t=t.replace(n,"$1"),n=new RegExp("<div[^>]*>(.*?)</div>","g"),t=t.replace(n,"$1\n"),n=new RegExp("<p[^>]*>(.*?)</p>","g"),t=t.replace(n,"$1\n"),n=new RegExp("<br[^>]*>$"),t=t.replace(n,""),n=new RegExp("<br[^>]*>","g"),t=t.replace(n,"\n"),n=new RegExp("<[^>]*>","g"),t=t.replace(n,""),window.defferScripts.on("heJs",(function(){t=he.decode(t)})),t=t.replace(/\n*$/,"")}},{key:"imgToShortcode",value:function(e){if(!1===e)return"";var t=new RegExp('<img[^>]*class="[^"]*message-emoji_([^"]*)"[^>]*>',"g");return e.replace(t,"[:$1]")}},{key:"spanToShortcode",value:function(e){if(!1===e)return"";var t=new RegExp('<span[^>]*class="[^"]*message-emoji-icon_([^"]*)"[^>]*>',"g");return e.replace(t,"[:$1]")}},{key:"spanToshortcode",value:function(e){var t=new RegExp('<span[^>]*class="[^"]*message-emoji-icon_([^"]*)".*?</span>',"g");return e.replace(t,"[:$1]")}},{key:"shortcodeToImg",value:function(e){var t=e.match(/\[:([^\]]*)\]/g);if(t){var n,a=o(t);try{for(a.s();!(n=a.n()).done;){var i=n.value.replace(/\[:([0-9a-fA-F-]*)\]/g,"$1"),s=this.codeToUnicode(i),r=new RegExp("\\[:("+i+")\\]","g");e=e.replace(r,'<img class="message-emoji message-emoji_$1" src="'.concat(Utils.cdnImageUrl("/emoji/$1.svg"),'" alt="').concat(s,'">'))}}catch(e){a.e(e)}finally{a.f()}}return e}},{key:"codeToUnicode",value:function(e){return"&#x".concat(e.replace(/-/g,";&#x"),";")}},{key:"shortcodeToSpan",value:function(e){var t=e.match(/\[:([^\]]*)\]/g);if(t){var n,a=o(t);try{for(a.s();!(n=a.n()).done;){var i=n.value.replace(/\[:([0-9a-fA-F-]*)\]/g,"$1"),s=this.codeToUnicode(i),r=new RegExp("\\[:("+i+")\\]","g");e=e.replace(r,'<span class="message-emoji-icon message-emoji-icon_$1"><img src="'.concat(Utils.cdnImageUrl("/emoji/$1.svg"),'" alt="').concat(s,'"></span>'))}}catch(e){a.e(e)}finally{a.f()}}return e}},{key:"isEmoji",value:function(e){return!!e&&!e.replace(this.UNICODE_EMOJI_REGEXP,"")}},{key:"clearEmoji",value:function(e){return!!e&&e.replace(this.UNICODE_EMOJI_REGEXP,"")}},{key:"messageFromTrumbowyg",value:function(e){for(var t="",n=this.shortcodeToImg(e).replace(/\r?\n/g,"<br>").split("<br>"),o=0;o<n.length;o+=1)""!=n[o]?t+="<div>"+n[o]+"</div>":t+="<div><br/></div>";return t}},{key:"getSvgCode",value:function(e){var t=/([0-9a-fA-F-]*).svg/g.exec(e);return t?t[1]:null}},{key:"twemojiToSpriteImg",value:function(e){var t=window.emojiReplacements.getSvgCode(e.attr("src"));e.removeClass("message-emoji-twemoji"),t&&(e.attr("src",Utils.cdnImageUrl("/emoji/"+t+".svg")),e.addClass("message-emoji_"+t))}},{key:"escapeEmoji",value:function(e){return e.replace(this.UNICODE_EMOJI_REGEXP,(function(e){if(!e)return"";for(var t=[],n=0;n<e.length;n+=1)t.push(e.charCodeAt(n).toString(16));return"[:"+t.join("-")+"]"})).replace(/]\[:200d]\[:/g,"-200d-").replace(/]\[:200d]/g,"-200d]")}},{key:"fancyCount",value:function(e){return this.escapeEmoji(e).replace(/\[:.*?]/g,"e").length}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.emojiReplacements=new s},5957:function(e,t,n){deferScript("vueBootstrap",(function(){Vue.component("checkbox-with-label",n(44944).Z),Vue.component("checkbox-after-label",n(98324).Z),Vue.component("bill-form-modal",n(72644).Z)}),window.defferVuePages)},18834:function(e,t,n){window.emojiReplacements||n(84421),setTimeout((function(){$("#app-quiz-day").length>0&&(window.isPageIndex&&!window.USER_ID||window.isPageLand||window.defferVuePages?window.defferScripts.on("vueBootstrap",(function(){Vue.component("quiz-day",n(6883).Z),new Vue({el:"#app-quiz-day"})})):(Vue.component("quiz-day",n(6883).Z),new Vue({el:"#app-quiz-day"})))}))},63857:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.classes={balanceSubmit:".js-popup-balance__submit",balanceFrom:".js-popup-balance__form",balanceInput:".js-balance-popup_input",inputActionRemove:".js-input-action-remove",balancePopupSelect:".js-balance-popup-select",paypalError:".js-paypal-error",balanceSum:".js-balance-popup-sum",balanceSumHidden:".js-balance-popup-sum-hidden",billResultAmount:".bill_result_popup_amount",billResultBlock:".bill_result_popup_block",maxValueError:".js-max-value-error"},this.timeout=0,this.minBalanceRefillBankValue=window.BillMinSum,this.event()}var t,n,a;return t=e,a=[{key:"showBillFormPopup",value:function(e){var t={sum:Utils.getFloatValue(e),needJson:1};$.ajax({url:"/api/bill/getform",type:"post",data:t,dataType:"json",success:function(e){"success"===e.result&&(window.bus.$emit("openBillFormModal",e.data),$(".popup").remove(),unlockBodyForPopup())}})}}],(n=[{key:"event",value:function(){var e=this;$(document).on("click",this.classes.inputActionRemove,(function(){$(e.classes.balanceSubmit).addClass("disabled popup-balance__submit-disabled"),$(e.classes.maxValueError).addClass("d-none"),"undefined"!=typeof refillCommission&&refillCommission.clear(),$(e.classes.balanceSum).val("").removeClass("min-value-error"),$(e.classes.balanceSumHidden).val(""),$(e.classes.inputActionRemove).addClass("hidden"),$(e.classes.billResultBlock).addClass("hidden"),e.changeStatePayPalError($(e.classes.balancePopupSelect).val())})).on("keyup paste blur",this.classes.balanceInput,(function(t){var n=$(e.classes.billResultAmount),o=GeneralFunctions.getBillAmount($(t.target).val());"ru"===window.actor_lang?(o=Utils.priceFormat(o),n.html(o+'&nbsp;<span class="rouble">₽</span>')):(o=Utils.numberFormat(o,2,".",","),n.text("$"+o)),clearTimeout(e.timeout),e.timeout=setTimeout((function(){e.validationBalancePopup()}),100)}))}},{key:"changeStatePayPalError",value:function(e){$(this.classes.paypalError).toggleClass("d-none",this.checkPayPal(e))}},{key:"validationBalancePopup",value:function(){var e=$(this.classes.balanceSubmit),t=$(this.classes.balanceInput),n=Utils.getFloatValue(t.val()),o=$(this.classes.balancePopupSelect).val();return n&&n>0&&n<=MAX_PRICE_ACTOR?(e.removeClass("popup-balance__submit-disabled"),"bank"===o&&n<this.minBalanceRefillBankValue||!this.checkPayPal(o)?(e.addClass("disabled").removeClass("kw-button--loading").prop("disabled",!0),!1):(e.removeClass("disabled").prop("disabled",!1),!0)):(e.addClass("disabled popup-balance__submit-disabled").removeClass("kw-button--loading").prop("disabled",!0),!1)}},{key:"submitFormBalance",value:function(){var t=!0,n=$(this.classes.balanceFrom);if(n.find("input.js-min").length>0&&_.forEach(n.find("input.js-min"),(function(e){var n=$(e).val();if($(e).hasClass("js-balance-popup-sum-with-spaces")&&(n=Utils.priceClear(n)||0),n<$(e).data("min-value"))return $(e).addClass("min-value-error"),t=!1,!1;$(e).removeClass("min-value-error")})),!t)return!1;if(!this.validationBalancePopup())return!1;var o=n.find('input[name="sum"]').val();return"bank"===n.find(this.classes.balancePopupSelect).val()?(e.showBillFormPopup(o),!1):"qr"===n.find(this.classes.balancePopupSelect).val()?(window.bus.$emit("open-modal-sbp-payment",{data:{sum:o}}),$(".popup").remove(),unlockBodyForPopup(),!1):void n.submit()}},{key:"checkPayPal",value:function(e){if("ru"===window.actor_lang)return!0;if(4!==window.USER_REFILL_SYSTEM)return!0;if("corefy_paypal"!==e)return!0;var t=window.payPalUserRefilledSum||0,n=$(this.classes.balanceSum),o=n.val();return n.hasClass("js-balance-popup-sum-with-spaces")&&(o=Utils.priceClear(o)||0),t+o<=window.payPalRefillLimit}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(88727),window.BalancePopup=new a},88727:function(){window.show_balance_popup=function(e,t,n,o){var a="ru"==window.actor_lang;if("undefined"!=typeof refillCommission&&refillCommission.isNeedCommission()){var i=$("body");i.addClass("test-balance-commission"),$(document).off("click.refillCommissionTest").on("click.refillCommissionTest",".popup .overlay, .popup-close-js",(function(){i.removeClass("test-balance-commission")}))}var s="",r="";void 0!==e&&(s='value="'+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+'"',r=e);var c="";void 0!==t&&(c='<input name="from_type" value="'+t+'" type="hidden" />');var u="",d=parseInt(o);!isNaN(d)&&d>0&&(u='<input name="order_id" value="'+d+'" type="hidden" />');var p=parseInt(n),f="";!isNaN(p)&&p>0&&(f='<input id="payment_id" name="payment_id" value="'+p+'" type="hidden" />');var h='<div class="balance-popup__table-title">'+l("paymentMethod","components/balance-popup")+"</div>",m="",v=window.refillTypes||{},g=_.size(v)>1;g?_.forOwn(v,(function(e){m+='<option value="'+e.type+'"'+(e.gtmEvent?' data-gtm-event="'+e.gtmEvent+'"':"")+((e.type||"").includes(actualRefillType)?" selected":"")+">"+e.name+"</option>"})):m+='<input type="hidden" value="'+v[0].type+'" name="unitpay_type">',window.isFocusGroup20556&&(m+='<option value="qr">QR-код СБП</option>');var b,w="";$(".user-payment-method").val()&&(w=" hidden"),b=g?'<tr style="height: 40px;"><td class="w19p">'+h+'</td><td width="310"><select name="unitpay_type" class="js-balance-popup-select balance-popup__input balance-popup-chosen">'+m+"</select>"+(a?"":'<span class="js-paypal-error form-item__after-input d-none"><span class="form-item__error">You cannot add funds via PayPal. Please select another option.</span></span>')+"</td></tr>":'<tr class="hidden"><td colspan="2">'+m+'<div class="bl-methods"></div></td></tr>';var y=l("addFundsToBalance","components/balance-popup"),k=l("keepEnoughFunds","components/balance-popup",{tagBr:'<br className="d-none m-block">'}),C="undefined"!=typeof refillCommission&&refillCommission.isNeedCommission()?l("goToPayment","components/balance-popup"):l("addFunds","components/balance-popup"),x=1!==USER_REFILL_SYSTEM||Cookies.get("wmrBalanceNoticeViewed")&&Math.floor(Date.now()/1e3)-Cookies.get("wmrBalanceNoticeViewed")>86400?"":'<div class="js-wmr-popup-balance__notice hidden color-gray f12 lh16 mt10 mb10">В связи с тем, что WebMoney ограничила работу с кошельками WMR, пополнение возможно только с кошелька WMZ.</div>',S=window.userIsBlocked?"":'<button type="submit" disabled="true" class="js-popup-balance__submit popup-balance__submit kw-button kw-button--green disabled" onclick="if (typeof(yaCounter32983614) !== \'undefined\'){ yaCounter32983614.reachGoal(\'START-REFILL\');} ">'+C+"</button>",P=Utils.numberFormat(window.BalancePopup.minBalanceRefillBankValue);"ru"!==window.lang&&(P=Utils.numberFormat(window.BalancePopup.minBalanceRefillBankValue,0,".",","));var E=window.isPageBalance||"ru"===window.lang?"":"disabled",j='<h1 class="popup__title pr30">'+y+' <span class="popup__title-user-name">'+$(".mobile-nav__user-name").text()+'</span></h1><hr class="gray mt20 balance-popup__line"><div class="balance-popup__description">'+k+'</div><div class="balance-refill-form-js" id="foxForm"><form id="popup_balance_refill_form" class="js-popup-balance__form m-text-center" method="post" action="'+ORIGIN_URL+'/balance/refill"><div id="balance_popup_content"><table>'+b+'<tr class="bl-amount h40"><td class="w19p"><div class="balance-popup__table-title">'+l("amount","components/balance-popup")+(a?'<span class="rouble fw400">₽</span>':'<span class="fw400">$</span>')+"</div></td><td>"+c+f+u+'<div class="position-r"><input type="tel" '+E+' class="balance-popup__input js-balance-popup-sum js-balance-popup-sum-with-spaces input-style js-balance-popup_input" '+s+' placeholder="'+l("enterAmount","components/balance-popup")+'"><span class="js-min-value-error form-item__error d-none">'+l("minimumAmount","components/balance-popup")+' <span class="nowrap">'+Utils.priceFormat(window.BalancePopup.minBalanceRefillBankValue)+' <span class="rouble">₽</span></span></span><span class="js-max-value-error form-item__error d-none">'+l("maximumAmount","components/balance-popup")+(a?"":" <span>$</span>")+' <span class="nowrap">'+Utils.priceFormat(MAX_PRICE_ACTOR)+(a?' <span class="rouble">₽</span>':"")+"</span></span>"+("ru"===window.lang?'<span class="input-action-remove js-input-action-remove '+(r>0?"":"hidden")+'"></span>':"")+'<input type="hidden" name="sum" class="js-balance-popup-sum-hidden" value="'+(r>0?r:"")+'"></td></tr><tr class="eu-card-block hidden '+w+'" style="height: 40px;"><td class="w19p"><div class="balance-popup__table-title"></div></td><td><div class="choose-card-type ta-left"><p><b>'+l("issueRegion","components/balance-popup")+'</b></p><p><label for="type-epayment"><input class="payment-system" name="paymentSystem" type="radio" value="epayments" id="type-epayment" /><span>'+l("europeanUnion","components/balance-popup")+'</span></label></p><p><label for="type-unitpay"><input class="payment-system" name="paymentSystem" type="radio" value="unitpay" id="type-unitpay" /><span>'+l("other","components/balance-popup")+'</span></label></p></div><div class="region-error hidden red-error">'+l("pleaseSelectRegion","components/balance-popup")+'</div></td></tr><tr class="'+("undefined"!=typeof refillCommission&&refillCommission.isNeedCommission()?"js-bill-result":"")+' bill_result_popup_block hidden" style="height: 40px;"><td class="w19p"><div class="balance-popup__table-title">'+l("summary","components/balance-popup")+'</div></td><td class="'+("undefined"!=typeof refillCommission&&refillCommission.isNeedCommission()?"js-bill-result-amount":"")+' bill_result_popup_amount t-align-l"></td></tr></table><div class="js-popup-balance__notice hidden popup-balance__notice f12 lh16 mt10 mb10">'+l("minimalBillRefillBalance","components/balance-popup",{minBalance:P,commission:BILL_COMISSION})+"</div>"+x+'<div class="balance_refill_wait_block" style="display: none;"><div>'+l("waitingPaymentSystemResponse","components/balance-popup")+'</div><div style="height: 50px;position:relative;"><div class="preloader__ico preloader__ico_small" style="top: 5px; left: 189px;"></div></div></div></div><input name="back_url" value="'+window.location.pathname+window.location.search+'" type="hidden" />'+S+'<div class="popup-close-js popup-close-link cur m-visible">'+l("closeBalancePopup","components/balance-popup")+"</div></form></div>";window.bus.$emit("global-close-modal"),show_popup(j,"balance-popup balance-popup-modal kw--balance-popup-modal","","popup--center balance-popup-window");var O=$(".balance-popup-chosen");deferScript("chosenJquery",(function(){O.chosen({width:"100%",disable_search:!0,inherit_select_classes:!0})}),window.isPageProfile),O.on("chosen:showing_dropdown",(function(){$(".js-balance-popup_input").addClass("pointer-en")})),O.on("chosen:hiding_dropdown",(function(){setTimeout((function(){$(".js-balance-popup_input").removeClass("pointer-en")}),1)}));var T=$(".js-popup-balance__submit"),B=$(".js-max-value-error");T.on("click",(function(e){e.preventDefault(),GTM.pushDataLayer({event:"checkoutOption",ecommerce:{checkout_option:{actionField:{step:2,option:"ConfirmAndPay"}}}});var t=$(".js-balance-popup-select option:selected").data("gtm-event")||null;t&&GTM.pushDataLayer({event:t}),T.hasClass("popup-balance__submit-disabled")||T.addClass("kw-button--loading").attr("disabled",!0),setTimeout((function(){window.BalancePopup.submitFormBalance()}),500)}));var A=$(".js-popup-balance__form"),I=$(".bill_result_popup_block"),L=$(".bill_result_popup_amount"),M=$(".js-balance-popup-select"),R=$(".js-balance-popup-sum"),D=$(".js-balance-popup-sum-hidden"),N=$(".js-input-action-remove");A.on("submit",(function(){var e=$(".js-balance-popup-select").val();!e&&$("#balance_popup_content .bl-methods").length>0&&(e=!0);var t=$(".js-balance-popup-sum").val();return!(_.isUndefined(e)||_.isUndefined(t))})),R.on("blur",(function(){"bank"===M.val()&&Utils.getFloatValue($(this).val())<window.BalancePopup.minBalanceRefillBankValue&&$(this).addClass("min-value-error")})),R.on("input",(function(){var e=Utils.getFloatValue($(this).val()),t="";!isNaN(e)&&e>0?(t=a?Utils.numberFormat(Math.ceil(e)):Utils.numberFormat(Math.ceil(e),2,".",","),N.removeClass("hidden"),D.val(e)):N.addClass("hidden"),$(this).val(t),"undefined"!=typeof refillCommission&&refillCommission.setCommission(),"bank"===M.val()&&(e>=window.BalancePopup.minBalanceRefillBankValue?($(this).removeClass("min-value-error"),I.removeClass("hidden")):I.addClass("hidden")),e>MAX_PRICE_ACTOR?(B.removeClass("d-none"),T.addClass("disabled popup-balance__submit-disabled")):(B.addClass("d-none"),T.removeClass("disabled popup-balance__submit-disabled")),window.BalancePopup.changeStatePayPalError(M.val())})),M.on("change",(function(){var e=$(this).val();if("undefined"!=typeof refillCommission&&refillCommission.clear(),window.BalancePopup.validationBalancePopup(),"card"!=e?$(".eu-card-block").addClass("hidden"):$(".user-payment-method").val()||$(".eu-card-block").removeClass("hidden"),"bank"==e){T.html(l("createInvoice","components/balance-popup")).data("block-check",1),T.addClass("kw-button--invoice"),$(".js-popup-balance__form").attr("action",ORIGIN_URL+"/bill_get"),$(".js-popup-balance__notice").removeClass("hidden"),$(".js-wmr-popup-balance__notice").addClass("hidden"),$(".balance-popup__input").addClass("js-min").data("min-value",window.BalancePopup.minBalanceRefillBankValue);var t=R.val(),n=GeneralFunctions.getBillAmount(t);a?(n=Utils.priceFormat(n),L.html(n+'&nbsp;<span class="rouble">₽</span>')):L.text(l("valueCurrency","components/balance-popup",{value:n})),Utils.getFloatValue(t)>=window.BalancePopup.minBalanceRefillBankValue&&I.removeClass("hidden"),R.attr("placeholder",l("enterAmountGreaterThan","components/balance-popup",[Utils.priceFormat(window.BalancePopup.minBalanceRefillBankValue)])),isMobile()&&R.attr("placeholder",l("minimumValue","components/balance-popup",{min:Utils.priceFormat(window.BalancePopup.minBalanceRefillBankValue)}))}else R.removeClass("min-value-error"),T.removeClass("kw-button--invoice"),T.html(C).data("block-check",0),$(".js-popup-balance__form").attr("action",ORIGIN_URL+"/balance/refill"),$(".js-popup-balance__notice").addClass("hidden"),$(".js-wmr-popup-balance__notice").addClass("hidden"),$(".balance-popup__input").removeClass("js-min"),I.addClass("hidden"),$(".js-balance-popup_input").attr("placeholder",l("enterAmount","components/balance-popup")),["paymore_webmoney","webmoney"].includes($(this).val())&&($(".js-wmr-popup-balance__notice").removeClass("hidden"),Cookies.get("wmrBalanceNoticeViewed")||Cookies.set("wmrBalanceNoticeViewed",Math.floor(Date.now()/1e3),{expires:90,path:"/"}));"undefined"!=typeof refillCommission&&refillCommission.isNeedCommission()&&(refillCommission.setCommission(),refillCommission.setAmount()),window.BalancePopup.changeStatePayPalError(e)})),e&&"undefined"!=typeof refillCommission&&refillCommission.isNeedCommission()&&(refillCommission.setCommission(),refillCommission.setAmount()),window.BalancePopup.validationBalancePopup(),window.BalancePopup.changeStatePayPalError(M.val())}},25605:function(){window.showChangeInvalidEmailPopup=function(e){var t='<h1 class="popup__title">'.concat(l("emailConfirmation","components/show-change-email-popup"),'</h1>\n\t\t<hr class="gray mt20 mb10">\n\t\t<i class="ico ico-error mr10 pull-left"></i>\n\t\t<b>').concat(l("yourEmailInboxNotAcceptEmails","components/show-change-email-popup"),"</b><br><br>").concat(l("dueTwoReasons","components/show-change-email-popup"),'\n\t\t<ul class="mb10"><li class="mt5">').concat(l("emailAddressChanged","components/show-change-email-popup"),'</li><li class="mt5">').concat(l("messagesBlockedSpamFilter","components/show-change-email-popup"),"</li></ul>\n\t\t<b>").concat(l("whatDoNext","components/show-change-email-popup"),"</b> ").concat(l("enterCorrectEmail","components/show-change-email-popup"),'<br><br>\n\t\t<div id="foxForm">\n\t\t\t<form class="js-form-change-email">\n\t\t\t\t<div>\n\t\t\t\t\t<div class="js-form-item form-entry">\n\t\t\t\t\t\t<input class="js-form-input js-confirm-email text styled-input wMax f14" placeholder="').concat(l("email","components/show-change-email-popup"),'" name="user_email" tabindex="1" type="text" value="').concat(e,'"/>\n\t\t\t\t\t\t<div class="js-form-error form-item__error"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row form-entry">\n\t\t\t\t\t\t<input type="submit" value="').concat(l("confirmEmailAddress","components/show-change-email-popup"),'" class="hugeGreenBtn GreenBtnStyle h50 pull-reset wMax dibi v-align-m " formnovalidate /><br>\n\t\t\t\t\t\t<input type="hidden" name="jlog" id="jlog" value="1" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="clear"></div>\n\t\t\t</form>\n\t\t</div>');show_popup(t,"popup-email-confirm",!0)},$(document).on("click",".js-show-change-invalid-email",(function(e){var t=$(e.target).data("email")||"";showChangeInvalidEmailPopup(t)})).on("submit",".js-form-change-email",(function(e){e.preventDefault();var t=$(e.target);t.find(".js-confirm-email").val().trim(),$.ajax({type:"POST",url:"/api/user/changeemail",data:t.serialize(),success:function(e){e.success?window.location.replace(e.redirect):t.find(".js-form-error").text(e.error).show()}})}))},63812:function(){window.changeUserType=function(e,t,n){var o={usertype:e};n?window.location.href=n:($(".is_index").length>0&&!t&&(o.page="index"),$.get("/change_usertype",o,(function(n){"undefined"!=typeof yaCounter32983614&&(1===e?yaCounter32983614.reachGoal("CHANGE-TYPE-ZAKAZCHIK"):yaCounter32983614.reachGoal("CHANGE-TYPE-ISPOLNITEL")),t?1===e||2===e?location.href="/":location.reload():n&&void 0!==n.wants&&$("#wrap-wants").html(n.wants)})))}},70353:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}$((function(){var t={free:l("readyWork","common/status-switcher"),busy:l("busy","common/status-switcher")},n=$(".js-worker-status"),o=$(".js-status-switcher"),a=$(".js-status-switcher.tooltipster"),i=$(".js-status-switcher-mobile"),s=i.closest(".js-switch").find(".switch__input"),r=o.find(".slider"),c=$(".js-worker-status-popup"),u=!1,d=!1;0===s.length&&(s=i.closest(".js-switch").find(".js-switch-input")),window.defferScripts.on("tooltipster",(function(){setTimeout((function(){a.tooltipster(TOOLTIP_CONFIG)}))})),$(window).on("resize",(function(){try{$(".js-switch-menu").tooltipster("close")}catch(e){}})),$(document).on("click",".js-worker-status-switch-container",(function(){var e=null,t=$(this).is(".js-switch-menu"),o=$(this),a=(e=o.hasClass("js-worker-status-switch")?o:o.find(".switch__track").length>0?o.find(".switch__track"):o.find(".js-switch-track")).data("status"),i="free"===a?"busy":"free";if(!o.hasClass("tooltipster")&&!o.hasClass("tooltipstered")||"free"!=i||!window.touchIsUsed||window.forceClick){window.forceClick=!1;var r=e.data("switch-all"),c=e.data("has-offers"),f=e.data("check-offers");if(window.switchWorkerStatus=function(l){var c;if(u)return!1;u=!0;var d={status:i};null===(c=window.ManageKworksActions)||void 0===c||c.showPreloader(),void 0!==r&&(d.switch_all=r),window.isPageManageKworks&&(d.isPageManageKworks=!0);var f=e.closest(".popup").find(".popup-close-js").eq(0);l&&(f=f.add($(l).closest(".popup").find(".popup-close-js").eq(0)));var h=function(){"/manage_kworks"===location.pathname&&location.assign(location.pathname)};p(e,i,a),GeneralFunctions.apiPostRequest("user/switchworkerstatus",d,(function(e){var a;if(f.click(),e.error)show_popup(e.error,"",!1,"popup_error"),$(".popup_error").on("popup.remove",h);else{if("none"===e.status){t||n.remove(),s.length>0&&s.prop("checked",!$switchEl.prop("checked")),$(".logoutheader .userdata").removeClass("has-status");try{o.tooltipster("close")}catch(e){}alert(e.message)}else window.isChat&&window.conversationUserId&&window.bus.$emit("refreshMessageForm",window.conversationUserId);!function(e){"/manage_kworks"===location.pathname&&$(".js-kwork-list").html(e)}(e.htmlKworkList)}null===(a=window.ManageKworksActions)||void 0===a||a.hidePreloader(),u=!1}),(function(){var t;p(e,a,i),null===(t=window.ManageKworksActions)||void 0===t||t.hidePreloader(),u=!1}))},"busy"!==i||u)switchWorkerStatus();else{var h='<div class="popup__header"><h1>'+l("hideOffers","common/status-switcher")+'</h1></div><div class="popup__body"><p>'+l("exchangeWillHidden","common/status-switcher")+'</p></div><div class="popup__footer"><button class="kw-button kw-button--gray-border popup-close-js">'+l("cancelHiding","common/status-switcher")+'</button><button class="kw-button kw-button--red kw-button--size-48 kw-button--no-padding" onclick="switchWorkerStatus(this);">'+l("hide","common/status-switcher")+"</button></div>";if(c)show_popup(h,"popup-kworks-confirm-stop",!1,"popup--light popup--w343 popup--center");else if(f){if(d)return;d=!0,GeneralFunctions.apiPostRequest("user/checkworkeroffers",{},(function(e){d=!1,e.has_offers?show_popup(h,"popup-kworks-confirm-stop",!1,"popup--light popup--w343 popup--center"):switchWorkerStatus()}))}else switchWorkerStatus()}}}));var p=function(a,i,l){s.length>0&&s.prop("checked",!s.prop("checked")),n.removeClass("worker-status-"+l).text(t[i]).add(a).data("status",i),o.length<1?n.addClass("worker-status-"+i):(o.data("status",i),"object"===e(window.defferScripts)?window.defferScripts.on("tooltipster",(function(){addScriptToQueue((function(){f()}))})):f(),r.toggleClass("active","free"===i),c.toggleClass("free","free"===i)),$(".js-tooltip-"+i).removeClass("hidden")},f=function(){"free"===status?o.tooltipster("disable"):o.hasClass("tooltipstered")?o.tooltipster("enable"):o.tooltipster(TOOLTIP_CONFIG)};function h(e){GeneralFunctions.apiPostRequest("user/setworkerstatusswitchall",{value:e},(function(e){e.error&&alert(e.error)}))}$(document).on("click",".js-worker-status-switch-type-all",(function(){h("1")})),$(document).on("click",".js-worker-status-switch-type-only",(function(){h("0")}))})),$((function(){var e=$("#worker-status-switch-wrap .js-worker-status-switch"),t=$(".js-worker-status-switch-type-all"),n=$(".js-worker-status-switch-type-only");function o(o,a){var i=$(a);e.data("switch-all",o).attr("data-switch-all",o).prop("data-switch-all",o),t.prop("checked","1"===o),n.prop("checked","0"===o),(isMobile()||window.IS_MOBILE||jQuery(".js-status-switch-tooltip").hasClass("js-full-version"))&&(window.forceClick=!0,i.length>0?i.filter(".js-worker-status-switch-container").trigger("click"):$(".js-worker-status-switch-container").trigger("click"))}$(document).on("click",".js-worker-status-switch-type-all",(function(){o("1",$(this).closest(".js-status-switch-tooltip").data("target-trigger"))})),$(document).on("click",".js-worker-status-switch-type-only",(function(){o("0",$(this).closest(".js-status-switch-tooltip").data("target-trigger"))})),$(document).on("click",".js-tooltip-radio--mobile-menu label",(function(e){e.preventDefault(),$(this).prev().click()})),$(".js-manage-kworks-checkbox").on("change",(function(){var e=$("#gigs_form").get(0),t=new FormData(e);$.ajax({url:KWORK_BASE_URL+"/custom_request_settings",type:"post",contentType:!1,processData:!1,data:t,success:function(e){e.success||MessageState.showMessage("error",e.message||l("errorWhileSaving","common/status-switcher"))},error:function(){MessageState.showMessage("error",l("errorWhileSaving","common/status-switcher"))}})})),deferScript("tooltipster",(function(){setTimeout((function(){deferScript("generalJs",(function(){_.forEach($(".js-switch-menu:not(.tooltipster)"),(function(e){var t=$(e);t.tooltipster(TOOLTIP_CONFIG).tooltipster("instance").on("before",(function(e){t.find(".js-switch-input").prop("checked")&&e.stop()}))}))}))}))}))}))},88417:function(){var e,t,n,o,a,i,s,r,l,c,u=(e={},t={},n=!1,o=!1,a=function(e){return JSON.stringify(e)!=JSON.stringify(t)},i=function(e,t,n,o,a,i){var s=o;null!=s&&""!==s||(s=void 0);var r=i;null!=r&&""!==r||(r=!1);var l=!1;void 0!==n&&!0===n&&(l=!0),t>0?(t>9&&r&&!window.IS_MARKET_APP_RU?e.addClass("f10").text("+"):e.text(t),!0!==s&&(l?e.addClass(a):e.hasClass(a)&&e.removeClass(a)),e.show()):e.hide(),e.parents(".js-need-check-notify").attr("data-active",t),window.IS_MARKET_APP_RU&&window.updateResponsiveHeader&&window.updateResponsiveHeader()},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(e.find(".notifications-content-block").html(""),n)for(var o=0;o<t.length;o+=1){if(o>=8){var a=window.l("messageCountTip","legacy-js/notify-module",[8,t.length]),i=$(document.createElement("div")).addClass("message-count-tip").html(a);e.find(".notifications-content-block").append(i);break}var s=$(document.createElement("a")).addClass("inbox-message-link").attr("href",t[o].link),r=$(document.createElement("span")).addClass("userimage").append(t[o].avatar);r.appendTo(s),$(document.createElement("span")).addClass("inbox-message-user-name text-nowrap").html(t[o].text).appendTo(s),e.find(".notifications-content-block").append(s)}else for(var l=0;l<t.length;l+=1){var c=$(document.createElement("span")).addClass("inbox-message-link").addClass("empty-inbox-data nowrap").html(t[l].text);e.find(".notifications-content-block").append(c)}LazyLoad.loadImages()},r=function(t){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.other.find(".block-popup");if(!a.is(":visible")||o){if(n=!1,void 0!==t.new_message){var r,l,u=e.inbox.find(".js-notice__link").find(".js-message_counter");t.warning_inbox_count&&parseInt(t.warning_inbox_count)>0?r=!0:"warning_inbox_count"in t&&0===parseInt(t.warning_inbox_count)?r=!1:l=!0,window.updateFav(void 0,t.new_message>0),i(u,t.new_message,r,l,"message-counter--warning",!0),i($(".js-notice-mobile__message-counter"),t.new_message,r,l,"notify-number-block_warning"),o&&$.get("/api/user/checknotify",(function(t){t.success&&s(e.inbox,t.data.dialog_data,t.data.new_message,"message-counter--warning")}),"json")}a.addClass("wating").html(""),Utils.isActiveWindow()&&a.is(":visible")&&(window.isPageLand?window.defferScripts.on("generalJs",(function(){c(a)})):c(a));var d=t.notify_unread_count;if(void 0!==d){window.updateFav(void 0,d>0);var p=e.other.find(".js-notice__link").find(".js-message_counter");i(p,d,t.notify_has_red,void 0,"message-counter--warning",!0),i($(".js-notice-mobile__other-counter"),d,t.notify_has_red,void 0,"notify-number-block_warning")}if(void 0!==t.has_order_important){window.workerHasOrderImportant=t.has_order_important;var f=$(".has-orders-count-as-worker .user-active-orders-count");f.length>0&&f.toggleClass("red",t.has_order_important)}}},l=function(t){e.other.find(".block-popup").removeClass("wating").html($(t).html()),window.defferScripts.on("jScrollPane",(function(){e.other.find(".foxNotifBox_other").css({overflow:"inherit"}).jScrollPane(),e.other.find(".foxNotifBox_other .jspVerticalBar").length>0&&e.other.find(".foxNotifBox_other hr").css({"margin-right":"0"})}))},c=function(e,t,a,i){if(!1!==n&&!a)return!1;if(i){if(o)return;o=!0}n=!0,$.get("/api/user/checknotify",(function(n){if(!0===n.success){if(e){var o=$(n.data.last_tracks_html).html(),a=$(e);a.html(o).promise().done((function(){$(e).removeClass("wating"),window.defferScripts.on("jScrollPane",(function(){window.popupJscrollPane=a.find(".foxNotifBox_other").css({overflow:"inherit"}).jScrollPane(),a.find(".jspVerticalBar").length>0&&a.find("hr").css({"margin-right":"0"})}))}))}t&&t.onSuccess&&t.onSuccess(n),r(n.data,!1)}})).complete((function(){i&&(o=!1)}))},{init:function(){tabsInteractionModule.init(),e={inbox:$(".js-notice-inbox"),other:$(".js-notice-other")}},setNotifyIcons:r,updateInboxMessage:s,updateNotifyIcons:function(){$.get("/api/user/checknotify",(function(e){!0===e.success&&(a(e.data.last_tracks)&&(t=e.data.last_tracks,l(t)),r(e.data))}),"json")},loadNotify:c});window.popupJscrollPane=!1,$((function(){$(".js-need-check-notify").length>0&&(u.init(),PULL_MODULE_ENABLE&&(deferScript("pullJs",(function(){PullModule.on(PULL_EVENT_NOTIFY,u.setNotifyIcons)}),window.defferJqueryPages),deferScript("vueBootstrap",(function(){window.bus&&(window.bus.$on("pushsteam-connection-restore",u.updateNotifyIcons),window.bus.$on("update-notify-icons",u.updateNotifyIcons))}),window.defferVuePages)));$(document).on("mouseenter",".js-message",(function(e){var t=$(e.currentTarget);if(t.data("active")){var n=t.find(".block-popup");n.fadeIn(200,"swing");var o=$(".js-message.js-notice-other .block-popup.wating"),a=$(".js-message.js-notice-inbox .block-popup.wating"),i={};a.length&&(i.onSuccess=function(e){a.removeClass("wating"),u.updateInboxMessage($(".js-notice-inbox"),e.data.dialog_data,e.data.new_message)}),window.isPageLand?window.defferScripts.on("generalJs",(function(){u.loadNotify(o.length?o:null,i,!!a.length,!0)})):u.loadNotify(o.length?o:null,i,!!a.length,!0),window.defferScripts.on("jScrollPane",(function(){t.hasClass("js-notice-other")&&"none"!=n.css("display")&&(window.popupJscrollPane&&window.popupJscrollPane.data()&&window.popupJscrollPane.data().jsp&&(window.popupJscrollPane.data().jsp.destroy(),window.popupJscrollPane=!1),window.popupJscrollPane=$(n).find(".foxNotifBox_other").css({overflow:"inherit"}).jScrollPane())}))}})).on("mouseleave",".js-message",(function(e){$(e.currentTarget).find(".block-popup").hide()}))}))},64763:function(){var e,t,n,o,a,i,s,r,l,c;window.tabsInteractionModule=(r={},l=function(e){var t=r[e];r[e].intervalId||t.timeout>0&&(r[e].intervalId=setInterval(t.onMain,t.timeout))},c=function(t){e.tabs.isMainTab()||r.hasOwnProperty(t.originalEvent.key)&&r[t.originalEvent.key].onSecond(JSON.parse(JSON.parse(t.originalEvent.newValue).value).value)},{init:function(){(e=this).tabs.setTabId(),e.tabs.setIntervals(),$(window).on("storage",c)},update:function(e){c(e)},addListener:function(t,n){e.setTimeoutFunction(t,null,n,0)},setTimeoutFunction:function(e,t,n,o){var a="event-"+e;r[a]={onMain:t,onSecond:n,timeout:o,intervalId:null}},tabs:(o=null,a="kwork-tabs-ids",i=function(){var n=e.storage.get(a);t=null==n.value?{}:n.value,null!==o&&!1!==t.hasOwnProperty(o)||(o=Math.min.apply(Math,Object.keys(t)),e.tabs.isMainTab()?function(){for(var e=Object.keys(r),t=0;t<e.length;t+=1)l(e[t])}():function(){for(var e=Object.keys(r),t=0;t<e.length;t+=1){var n=e[t];clearInterval(r[n].intervalId)}}())},s=function(){i(),function(){for(var n=Object.keys(t),o=(new Date).getTime(),i=!1,s=0;s<n.length;s+=1){var r=n[s];t[r].time<o-2e3&&(delete t[r],i=!0)}i&&e.storage.set(a,t)}(),t[n]={time:(new Date).getTime()},e.storage.set(a,t)},{setTabId:function(){var e=new Date;i(),n=e.getTime(),t[n]={time:e.getTime()}},setIntervals:function(){setInterval(s,1e3)},getTabId:function(){return n},isMainTab:function(){return o===n}}),storage:{set:function(e,t){var n={value:t,date:Date.now()};try{localStorage.setItem(e,JSON.stringify(n))}catch(t){if("QuotaExceededError"===t.name){var o={},a=Object.keys(localStorage);_.forEach(a,(function(e){o[e]=localStorage.getItem(e)}));var i=JSON.stringify(o).substr(0,1e6);i.length>1e5&&(localStorage.clear(),setTimeout((function(){window.logSender.send({ticket:17983,eventName:e,eventValue:JSON.stringify(n),localStorageData:i},!0)})))}}},get:function(e){return localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):{value:null,time:null}}}})},75802:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z={props:{id:{type:String,default:null},name:{type:String,default:null},classes:{type:String,default:null},value:{default:!1},checkedValue:{type:[Number,String],default:null},disabled:{default:!1},outset:{type:Boolean,default:!1},needed:{type:Boolean,default:!1},errorText:{type:String,default:""}},computed:{isChecked:function(){return Array.isArray(this.value)?_.includes(this.value,this.checkedValue):!!this.value},isError:function(){return this.errorText.length>0},classCheckbox:function(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({"checkbox-with-label--checked":this.isChecked,disabled:this.disabled,"checkbox-with-label--outset":this.outset,"checkbox-with-label--needed":this.needed,"checkbox-with-label--error":this.isError},this.classes)}},methods:{changeValue:function(e){if(Array.isArray(this.value)){var t=[].concat(this.value);_.includes(t,this.checkedValue)?t.splice(t.indexOf(this.checkedValue),1):t.push(this.checkedValue),this.$emit("input",t)}else this.$emit("input",e.target.checked)}}}},79525:function(e,t){"use strict";t.Z={data:function(){return{locale:document.documentElement.lang||"ru",defaultLocale:"ru"}},computed:{l:function(){return window.l},lp:function(){return window.lp},siteLang:function(){return document.documentElement.lang},isDefaultLang:function(){return this.siteLang===this.defaultLocale},isEn:function(){return"en"===this.siteLang},isEs:function(){return"es"===this.siteLang},isFr:function(){return"fr"===this.siteLang}},methods:{forceLocale:function(e){this.locale=e}}}},47933:function(e,t){"use strict";t.Z={data:function(){return{isTouchDevice:!1,mobileVersion:!1,windowInnerWidth:window.innerWidth}},created:function(){var e="ontouchstart"in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0;this.isTouchDevice=e,window.addEventListener("resize",this.updateMobileStatus),e&&window.addEventListener("orientationchange",this.updateMobileStatus),this.updateMobileStatus()},beforeDestroy:function(){window.removeEventListener("resize",this.updateMobileStatus),this.isTouchDevice&&window.removeEventListener("orientationchange",this.updateMobileStatus)},methods:{updateMobileStatus:function(){this.windowInnerWidth=window.innerWidth,this.mobileVersion=this.windowInnerWidth<768}}}},54427:function(e,t,n){"use strict";var o=n(1519),a=n.n(o)()((function(e){return e[1]}));a.push([e.id,".tcounter{-webkit-box-pack:end;-ms-flex-pack:end;color:#8a8a8a;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:12px;justify-content:flex-end;line-height:16px;margin-left:auto;white-space:nowrap}.tcounter-error,.tcounter.has-error{color:#f15b5b}.form-item__error:not(:empty).desktop~.tcounter,.form-item__error:not(:empty)~.tcounter{display:none}.order-extras__item-name-error:not(:empty).desktop~.tcounter,.order-extras__item-name-error:not(:empty)~.tcounter{opacity:0;pointer-events:none;width:0}.form-item__error:not(:empty).mobile~.tcounter{display:block}@media only screen and (max-width:767.98px){.form-item__error:not(:empty).mobile~.tcounter{display:none}}.order-extras__item-name-error:not(:empty).mobile~.tcounter{opacity:1;pointer-events:auto;width:auto}@media only screen and (max-width:767.98px){.order-extras__item-name-error:not(:empty).mobile~.tcounter{opacity:0;pointer-events:none;width:0}}",""]),t.Z=a},1519:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(a[s]=!0)}for(var r=0;r<e.length;r++){var l=[].concat(e[r]);o&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},72446:function(e,t,n){"use strict";var o,a=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function r(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},o=[],a=0;a<e.length;a++){var i=e[a],l=t.base?i[0]+t.base:i[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var d=r(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(p)):s.push({identifier:u,updater:v(p,t),references:1}),o.push(u)}return o}function c(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var a=n.nc;a&&(o.nonce=a)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,n,o){var a=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,a);else{var i=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function f(e,t,n){var o=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var h=null,m=0;function v(e,t){var n,o,a;if(t.singleton){var i=m++;n=h||(h=c(t)),o=p.bind(null,n,i,!1),a=p.bind(null,n,i,!0)}else n=c(t),o=f.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var a=r(n[o]);s[a].references--}for(var i=l(e,t),c=0;c<n.length;c++){var u=r(n[c]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=i}}}},72644:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var o=n(79525),a={mixins:[o.Z],props:{field:{type:Object,default:function(){}},value:{type:String,default:""},allowDot:{type:Boolean,default:!1},tooltipster:{type:String,default:""}},data:function(){return{localValue:"",error:"",errorShow:!1}},computed:{isNumberic:function(){return"numbers"==this.field.symbols},inputClass:function(){return this.error&&this.errorShow?"input-style--error":this.localValue&&!this.error?"input-style--check":""}},watch:{"field.optional":function(){this.validateValue()},value:function(){this.localValue!=this.value&&this.updateLocalValue()}},created:function(){this.updateLocalValue()},methods:{updateLocalValue:function(){this.localValue=this.value||"",this.handleNewFieldContent(!0),this.validateValue(),this.errorShow=""!==this.localValue},handleNewFieldContent:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.localValue;if("numbers"==this.field.symbols)t=t.replace(/[^\d]/g,"");else if("numbers&latin"==this.field.symbols)t=t.replace(/[^A-Za-z\s0-9\s]/g,"");else if("cyrillic"==this.field.symbols){var n=new RegExp("[^а-яё"+(this.allowDot?".":"")+" ]","gi");(t=t.replace(n,""))==this.localValue||e||(this.error=l("legacyTranslation2","js/bill-form-modal/bill-form-modal-field"),this.errorShow=!0)}t!=this.localValue&&(this.localValue=t),this.localValue!=this.value&&(this.errorShow=!1,this.$emit("input",this.localValue),this.validateValue())},onBlur:function(){this.validateValue(),this.errorShow=!0},clearValue:function(){this.$emit("input",""),this.errorShow=!1},validateValue:function(){if(this.localValue.trim().length<1&&!this.field.optional)this.error=this.field.errorEmptyText;else if(this.localValue&&(this.field.minLength&&this.localValue.length<this.field.minLength||this.field.notAllowedLengths&&_.includes(this.field.notAllowedLengths,this.localValue.length)))this.error=l("legacyTranslation3","js/bill-form-modal/bill-form-modal-field");else if(this.localValue&&this.field.maxLength&&this.localValue.length>this.field.maxLength){var e=(this.field.errorLengthName||this.field.title)+" ";this.field.minLength!=this.field.maxLength||this.field.errorForceMaxLengthText?e+=l("legacyTranslation5","js/bill-form-modal/bill-form-modal-field",[this.field.maxLength]):e+=l("legacyTranslation4","js/bill-form-modal/bill-form-modal-field",[this.field.maxLength]),this.error=e}else this.error="";this.emitStateChange()},emitStateChange:function(){this.$emit("change-state",this.error?1:0)}}},i=a,s=n(51900),r=(0,s.Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"field-row"},[n("div",{staticClass:"field-title"},[e._v("\n\t\t\t"+e._s(e.field.title||"")+"\n\t\t\t"),e.field.tooltipster?n("div",{staticClass:"tooltipster kw-tooltip",attrs:{"data-tooltip-text":e.field.tooltipster}}):e._e(),e._v(" "),e.field.optionalText?n("span",[e._v(e._s(e.field.optionalText))]):e._e()]),e._v(" "),n("div",{staticClass:"wrap-input-action"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],staticClass:"input-style",class:e.inputClass,attrs:{type:"text",placeholder:e.field.placeholder,maxlength:"200",pattern:e.isNumberic?"[0-9]*":null,inputmode:e.isNumberic?"numeric":null},domProps:{value:e.localValue},on:{input:[function(t){t.target.composing||(e.localValue=t.target.value)},function(t){return e.handleNewFieldContent()}],blur:e.onBlur}}),e._v(" "),e.localValue&&e.error?n("div",{staticClass:"wrap-input-action__remove",on:{mousedown:function(e){e.preventDefault()},click:e.clearValue}}):e._e(),e._v(" "),e.error&&e.errorShow?n("div",{staticClass:"form-item__after-input"},[n("span",{staticClass:"form-item__error"},[e._v(e._s(e.error))])]):e._e()])])])}),[],!1,null,null,null).exports,c={components:{BillFormField:r},inject:["updateData"],props:{data:{type:Object,default:function(){}},fields:{type:Array,default:function(){return[]}}}},u=(0,s.Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.fields,(function(t,o){return[t.isHide?e._e():n("bill-form-field",{key:o,ref:t.name,refInFor:!0,attrs:{field:t,value:e.data.formValues[t.name]},on:{input:function(n){return e.updateData("formValues."+t.name,n)},"change-state":function(n){return e.updateData("fieldStates."+t.name,n)}}})]}))],2)}),[],!1,null,null,null).exports,d={props:{options:{type:Array,default:function(){return[]}},value:{type:null,default:null},name:{type:String,default:"radio"},groupItemClass:{type:String,default:""},labelClass:{type:String,default:"custom-control-label"},labelCheckedClass:{type:String,default:""},optionLabel:{type:String,default:"name"},optionKey:{type:String,default:"id"},domName:{type:String,default:null},domValues:{type:Boolean,default:!1}},data:function(){return{selected:null}},watch:{selected:function(){this.$emit("input",this.selected)},value:function(){this.selected=this.value}},mounted:function(){this.selected=this.value}},p={components:{BillFormField:r,GroupBillFormField:u,RadioButtonGroup:(0,s.Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"radio-button-group"},e._l(e.options,(function(t,o){return n("span",{key:t.id,class:e.groupItemClass},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"custom-control-input",attrs:{id:e.name+t[e.optionKey],type:"radio",name:e.domName},domProps:{value:e.domValues?t.id:t,checked:e._q(e.selected,e.domValues?t.id:t)},on:{change:function(n){e.selected=e.domValues?t.id:t}}}),e._v(" "),n("label",{class:[e.labelClass,[e.labelCheckedClass&&t.id===e.selected?e.labelCheckedClass:""]],attrs:{for:e.name+t[e.optionKey]}},[e._t("option"+o,(function(){return[e._v("\n\t\t\t\t"+e._s(t[e.optionLabel])+"\n\t\t\t")]}),{option:t})],2),e._v(" "),n("br")])})),0)}),[],!1,null,null,null).exports},inject:["updateData"],props:{data:{type:Object,default:function(){}}},data:function(){return{selectedButton:null,edocTooltip:"Если вы используете систему электронного документооборота Калуга-Астрал, и хотите обмениваться с нами документами в электронном виде, то включите эту опцию. Найдите в системе электронного документооборота ИНН нашей компании, указанный в документах, и отправьте запрос на обмен документами."}},computed:{canSend:function(){var e=this,t=!1;return this.selectedButton&&(this.isNeedPhysical?t=0!=this.data.fieldStates.postAddress:_.forEach(this.data.fieldGroups.closingDocumentsInputs,(function(n){if(0!=e.data.fieldStates[n.name])return t=!0,!1}))),!t},postAddress:function(){return _.find(this.data.fieldGroups.closingDocumentsInputs,(function(e){return"postAddress"===e.name}))},curBtnId:function(){var e,t;return null===(e=this.data.formValues)||void 0===e||null===(t=e.docRadioGroup)||void 0===t?void 0:t.id},isNeedPhysical:function(){return this.selectedButton&&"needPhysical"===this.selectedButton.id},isEdocAgreed:function(){return this.selectedButton&&"isEdocAgreed"===this.selectedButton.id}},created:function(){this.setInitialValue()},methods:{setInitialValue:function(){this.curBtnId&&(this.selectedButton="isEdocAgreed"===this.curBtnId?this.data.fieldGroups.closingDocuments[0]:this.data.fieldGroups.closingDocuments[1])},send:function(){this.canSend?window.bus.$emit("send.closingDocuments"):this.scrollToFirstErrorField()},back:function(){this.canSend?window.bus.$emit("back.closingDocuments"):this.scrollToFirstErrorField()},copy:function(e){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(e.target),t.removeAllRanges(),t.addRange(n),document.execCommand("copy"),t.removeAllRanges(),setTimeout((function(){$(e.target).tooltipster("close")}),2e3)},scrollToErrorPostAddress:function(){this.$refs.postAddress.$el.scrollIntoView({block:"nearest",behavior:"smooth"}),this.$refs.postAddress.onBlur()},scrollToFirstErrorField:function(){var e=this;this.selectedButton&&(this.isNeedPhysical&&0!=this.data.fieldStates.postAddress&&this.scrollToErrorPostAddress(),this.isEdocAgreed&&_.forEach(this.data.fieldGroups.closingDocumentsInputs,(function(t){if(0!=e.data.fieldStates[t.name])return e.$refs["field-groups"].$refs[t.name][0].$el.scrollIntoView({block:"nearest",behavior:"smooth"}),e.$refs["field-groups"].$refs[t.name][0].onBlur(),!1})))}}},f=(0,s.Z)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"closing-documents"},[n("div",{staticClass:"group-checkbox-field"},[n("div",{staticClass:"kw-title kw-title--14"},[e._v("Вам нужен акт выполненных работ? Выберите, каким способом хотите его получить.")]),e._v(" "),n("radio-button-group",{attrs:{options:e.data.fieldGroups.closingDocuments,"group-item-class":"radio-button-filed",name:"closing-documents-radio-group"},on:{input:function(t){return e.updateData("formValues.docRadioGroup",t)}},scopedSlots:e._u([{key:"option0",fn:function(){return[n("span",[e._v("\n\t\t\t\t\tЧерез электронный документооборот\n\t\t\t\t\t"),n("div",{staticClass:"tooltip-part",on:{mousedown:function(e){e.stopPropagation(),e.preventDefault()},click:function(e){e.stopPropagation(),e.preventDefault()}}},[n("div",[n("div",{staticClass:"kw-tooltip tooltipster",attrs:{"data-tooltip-text":e.edocTooltip}})])])])]},proxy:!0},{key:"option1",fn:function(){return[n("span",[e._v("\n\t\t\t\t\tВыслать оригиналы документов по почте\n\t\t\t\t")])]},proxy:!0}]),model:{value:e.selectedButton,callback:function(t){e.selectedButton=t},expression:"selectedButton"}})],1),e._v(" "),e.selectedButton?n("div",[e.isNeedPhysical?n("bill-form-field",{ref:e.postAddress.name,attrs:{field:e.postAddress,value:e.data.formValues[e.postAddress.name]},on:{input:function(t){return e.updateData("formValues."+e.postAddress.name,t)},"change-state":function(t){return e.updateData("fieldStates."+e.postAddress.name,t)}}}):e._e(),e._v(" "),e.isEdocAgreed?[n("div",{staticClass:"field-group-header"},[e._v("Данные поля не обязательные, но эта информация поможет быстрее найти вашу организацию в системе ЭДО.")]),e._v(" "),n("group-bill-form-field",{ref:"field-groups",attrs:{data:e.data,fields:e.data.fieldGroups.closingDocumentsInputs}}),e._v(" "),n("div",{staticClass:"astral-message"},[e._v("\n\t\t\t\tЕсли вы используете систему Калуга-Астрал, найдите нашу компанию по ИНН "),n("span",{ref:"copy",staticClass:"content-copy js-tooltipster-copy",attrs:{"data-tooltip-text":"Скопировано"},on:{click:e.copy}},[e._v("9725024220")]),e._v(" и отправьте запрос на обмен документами.\n\t\t\t\t"),n("div",[e._v('\n\t\t\t\t\tДанные нашей организации для отправки приглашения: ООО "Воркбэй", ИНН 9725024220, КПП 772501001, АО «Калуга Астрал», Идентификатор ЭДО: 2AEFF918F9E-D719-4FAE-8768-5CDBA63A89F8\n\t\t\t\t')])])]:e._e()],2):e._e(),e._v(" "),n("div",{staticClass:"bottom-part"},[n("div",{staticClass:"bottom-buttons"},[n("button",{staticClass:"kw-button kw-button--white-border",on:{click:e.back}},[e._v("\n\t\t\t\tНазад\n\t\t\t")]),e._v(" "),n("button",{staticClass:"kw-button kw-button--green",class:{"kw-button--loading":e.data.isLoading},on:{click:e.send}},[e.selectedButton?[e._v("\n\t\t\t\t\tВыписать счет\n\t\t\t\t")]:[e._v("\n\t\t\t\t\tПропустить и выписать счет\n\t\t\t\t")]],2)]),e._v(" "),e.data.errors?n("div",{staticClass:"bill-form-modal__error",domProps:{innerHTML:e._s(e.data.errors)}}):e._e()])])}),[],!1,null,null,null).exports,h={components:{ClosingDocuments:f,GroupBillFormField:u},mixins:[o.Z],inject:["updateData"],props:{data:{type:Object,default:function(){}}},data:function(){return{needPayOfertaError:!1}},computed:{ofertaNeeded:function(){return!this.data.formValues.isPayOfertaAccepted&&this.needPayOfertaError},canSend:function(){var e=this,t=!1;return _.forEach(this.data.fieldGroups.accountStatement,(function(n){if(0!=e.data.fieldStates[n.name])return t=!0,!1})),!t&&!this.data.isLoading&&this.data.formValues.isPayOfertaAccepted}},methods:{send:function(){if(!this.canSend)return this.scrollToFirstErrorField(),void(this.data.showPayOferta&&!this.data.formValues.isPayOfertaAccepted&&(this.needPayOfertaError=!0));window.bus.$emit("send.accountStatement")},scrollToFirstErrorField:function(){var e=this;_.forEach(this.data.fieldGroups.accountStatement,(function(t){if(0!=e.data.fieldStates[t.name])return e.$refs["field-groups"].$refs[t.name][0].$el.scrollIntoView({block:"nearest",behavior:"smooth"}),e.$refs["field-groups"].$refs[t.name][0].onBlur(),!0,!1}))}}},m={components:{AccountStatement:(0,s.Z)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"account-statement"},[e._m(0),e._v(" "),n("group-bill-form-field",{ref:"field-groups",attrs:{data:e.data,fields:e.data.fieldGroups.accountStatement}}),e._v(" "),n("div",{staticClass:"middle-part"},[e.data.showPayOferta?n("div",{staticClass:"checkbox-field"},[n("checkbox-after-label",{attrs:{id:"account-statement-oferta-needed",needed:e.ofertaNeeded,value:e.data.formValues.isPayOfertaAccepted},on:{input:function(t){return e.updateData("formValues.isPayOfertaAccepted",t)}}},[e._v("\n\t\t\t\tПринимаю "),n("a",{attrs:{target:"_blank",rel:"nofollow noreferrer noopener",href:"/pay_oferta"}},[e._v("Договор-оферту")])]),e._v(" "),e.needPayOfertaError&&!e.data.formValues.isPayOfertaAccepted?n("div",{staticClass:"form-item__after-input"},[n("span",{staticClass:"form-item__error"},[e._v("Необходимо принять Договор-оферту")])]):e._e()],1):e._e()]),e._v(" "),n("div",{staticClass:"bottom-part"},[n("div",{staticClass:"bottom-buttons"},[n("button",{staticClass:"kw-button kw-button--green",class:{"kw-button--loading":e.data.isLoading},on:{click:e.send}},[e._v("\n\t\t\t\tПродолжить\n\t\t\t")])])])],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"top-tip kw-alert"},[e._v("\n\t\tДля формирования счета на оплату заполните верно все поля формы."),n("br"),e._v("\n\t\tСредства будут зачислены на баланс в течение 1-3 банковских дней после оплаты."),n("br"),e._v("\n\t\tОрганизация не является плательщиком НДС.\n\t")])}],!1,null,null,null).exports,ClosingDocuments:f},provide:function(){var e=this;return{updateData:function(t,n){for(var o=t.split("."),a=e.data,i=o.length-1,s=o[i],r=0;r<i;r+=1)a=a[o[r]];e.$set(a,s,n)}}},data:function(){return{formShown:!1,sum:"",currentComponent:"accountStatement",idIsEdocAgreed:"is_edoc_agreed",idNeedPhysical:"needPhysical",components:{accountStatement:"Выписка счета",closingDocuments:"Закрывающие документы"},data:{isLoading:!1,errors:"",fieldGroups:{accountStatement:[{name:"name",title:"Наименование",placeholder:"Полное наименование организации",errorEmptyText:"Укажите полное название организации"},{name:"inn",title:"ИНН",placeholder:"ИНН организации",symbols:"numbers",minLength:9,maxLength:12,notAllowedLengths:[11],errorEmptyText:"Укажите ИНН организации"},{name:"kpp",title:"КПП",placeholder:"КПП организации",optional:!0,optionalText:"необязательно",symbols:"numbers",minLength:9,maxLength:9,errorEmptyText:"Укажите КПП организации",errorForceMaxLengthText:!0},{name:"checkingAccount",title:"Расчётный счет",placeholder:"Номер расчетного счета",symbols:"numbers&latin",minLength:1,errorEmptyText:"Укажите номер расчетного счета",errorLengthName:"Номер счета"},{name:"bankName",title:"Наименование банка",placeholder:"Полное наименование банка",errorEmptyText:"Укажите название банка"},{name:"bik",title:"БИК",placeholder:"БИК банка",symbols:"numbers",minLength:1,errorEmptyText:"Укажите БИК",errorForceMaxLengthText:!0},{name:"correspondentAccount",title:"Корр. счет",placeholder:"Номер корреспондентского счета",symbols:"numbers",minLength:1,errorEmptyText:"Укажите номер корреспондентского счета",errorLengthName:"Номер счета",errorForceMaxLengthText:!0},{name:"legalAddress",title:"Юридический адрес",placeholder:"Индекс, город, улица, дом, офис/квартира",errorEmptyText:"Укажите юридический адрес"},{name:"fio",title:"ФИО директора (отв. лица)",placeholder:"Фамилия Имя Отчество",symbols:"cyrillic",errorEmptyText:"Укажите Фамилию Имя Отчество директора или ответственного лица"},{name:"phone",title:"Контактный телефон",placeholder:"Номер телефона для связи",symbols:"numbers",errorEmptyText:"Укажите номер телефона для связи"}],isPayOfertaAccepted:[{name:"isPayOfertaAccepted",default:!1}],closingDocuments:[{id:"isEdocAgreed",name:"ЭДО"},{id:"needPhysical",name:"Почта"}],closingDocumentsInputs:[{name:"kpp",title:"КПП",placeholder:"КПП организации",optional:!0,symbols:"numbers",minLength:9,maxLength:9,errorEmptyText:"Укажите КПП организации",errorForceMaxLengthText:!0,isHideIfExists:!0},{name:"edoId",title:"Идентификатор ЭДО",placeholder:"Идентификатор ЭДО",optional:!0,symbols:"numbers&latin",minLength:1},{name:"edoOperator",title:"Оператор ЭДО",placeholder:"Калуга Астрал, Тензер, Контур и т.п.",optional:!0},{name:"postAddress",title:"Почтовый адрес",placeholder:"Индекс, город, улица, дом, офис/квартира",errorEmptyText:"Укажите действительный почтовый адрес",tooltipster:"",optional:!0}]},formValues:{},fieldStates:{},showPayOferta:!0}}},watch:{"data.formValues.docRadioGroup":function(){if(this.data.formValues.docRadioGroup){var e=_.find(this.data.fieldGroups.closingDocumentsInputs,(function(e){return"postAddress"===e.name}));this.data.formValues.docRadioGroup.id===this.idNeedPhysical?(this.$set(e,"tooltipster",""),this.$set(e,"optional",!1)):(this.$set(e,"tooltipster","Оставьте почтовый адрес на случай, если отправить документы по ЭДО не удастся."),this.$set(e,"optional",!0))}}},created:function(){var e=this;this.initFormValues(),window.bus.$on("openBillFormModal",(function(t){t.fields&&(e.currentComponent="accountStatement",e.initFormValues(),_.forOwn(e.data.formValues,(function(n,o){var a=t.fields[_.snakeCase(o)];a&&(e.data.formValues[o]=he.decode(a.value||""))})),e.sum=t.fields.sum.value,e.$set(e.data.formValues,"docRadioGroup",1==t.isEdocAgreed?e.data.fieldGroups.closingDocuments[0]:null),e.$set(e.data.formValues,"isPayOfertaAccepted",t.isPayOfertaAccepted),t.isPayOfertaAccepted&&e.$set(e.data,"showPayOferta",!1),e.formShown=!0)})),window.bus.$on("send.accountStatement",(function(){var t=_.find(e.data.fieldGroups.closingDocumentsInputs,(function(e){return"kpp"===e.name}));e.data.formValues.kpp?t.isHide=!0:t.isHide=!1,e.currentComponent="closingDocuments"})),window.bus.$on("send.closingDocuments",(function(){e.sendFormModal()})),window.bus.$on("back.closingDocuments",(function(){e.currentComponent="accountStatement"}))},methods:{sendFormModal:function(){var e=this,t=new FormData;t.append("action","save"),_.forEach(this.data.fieldGroups.accountStatement,(function(n){t.append(_.snakeCase(n.name),e.data.formValues[n.name])})),this.data.formValues.docRadioGroup?"isEdocAgreed"===this.data.formValues.docRadioGroup.id?(_.forEach(this.data.fieldGroups.closingDocumentsInputs,(function(n){t.append(_.snakeCase(n.name),e.data.formValues[n.name])})),t.append(this.idIsEdocAgreed,1),t.append(this.idNeedPhysical,0)):(t.append(_.snakeCase("postAddress"),this.data.formValues.postAddress),t.append(this.idIsEdocAgreed,0),t.append(this.idNeedPhysical,1)):(t.append(this.idIsEdocAgreed,0),t.append(this.idNeedPhysical,0)),this.data.showPayOferta&&this.data.formValues.isPayOfertaAccepted&&t.append("is_pay_oferta_accepted",this.data.formValues.isPayOfertaAccepted?1:0),t.append("sum",this.sum),this.data.isLoading=!0,axios.post("/bill_get",t).then((function(t){t.data&&(t.data.success?window.location.href=t.data.redirect_url:(e.data.errors=t.data.errors.join("<br />"),e.data.isLoading=!1))})).catch((function(){e.data.isLoading=!1}))},initFormValues:function(){var e={},t={};_.forOwn(this.data.fieldGroups,(function(n){_.forEach(n,(function(n){e[n.name]=void 0!==n.default?n.default:"",t[n.name]=0}))})),this.data.formValues=e,this.data.fieldStates=t}}},v=(0,s.Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("k-modal",{staticClass:"bill-form-modal bill-form-modal--kw",attrs:{title:e.components[e.currentComponent],backdrop:"dark","no-close-on-backdrop":!0},model:{value:e.formShown,callback:function(t){e.formShown=t},expression:"formShown"}},[n(e.currentComponent,{tag:"component",attrs:{data:e.data}})],1)}),[],!1,null,null,null).exports},98324:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o={name:"checkbox-after-label",mixins:[n(75802).Z]},a=(0,n(51900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkbox-after-label",class:[e.classes,{"checkbox-after-label--checked":e.isChecked,disabled:e.disabled,"checkbox-after-label--outset":e.outset,"checkbox-after-label--needed":e.needed}]},[n("input",{attrs:{id:e.id,type:"checkbox",name:e.name,disabled:e.disabled},domProps:{checked:e.isChecked},on:{change:e.changeValue}}),e._v(" "),n("label",{attrs:{for:e.id}},[e._t("default")],2)])}),[],!1,null,null,null).exports},44944:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o={mixins:[n(75802).Z]},a=(0,n(51900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"checkbox-with-label",class:e.classCheckbox,attrs:{for:e.id}},[n("input",{attrs:{id:e.id,type:"checkbox",name:e.name,disabled:e.disabled},domProps:{checked:e.isChecked},on:{change:e.changeValue}}),e._v(" "),e._t("default"),e._v(" "),e.isError?n("span",{staticClass:"form-item__after-input form-item__error"},[e._v(e._s(e.errorText))]):e._e()],2)}),[],!1,null,null,null).exports},6883:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var o={name:"radio-group",mixins:[n(47933).Z],model:{prop:"radioChecked",event:"change:radio"},props:{noPrefixId:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},name:{type:String,default:null},radioChecked:{type:[Number,String],default:null},hasError:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,default:!1},isHtml:{type:Boolean,default:!1},optionIdPrefix:{type:String,default:""}},data:function(){return{checkedRadioId:this.radioChecked,optionPrefix:this.optionIdPrefix||"radio-"}},computed:{tooltipSide:function(){return this.mobileVersion?"top":"right"}},watch:{radioChecked:function(){this.checkedRadioId=this.radioChecked}},methods:{fieldClasses:function(e){return[this.options[e].labelClass||"",{"radio-group__label--checked":this.options[e].id==this.checkedRadioId,disabled:this.disabled||this.options[e].disabled,"radio-group__label--error":this.hasError}]}}},a=n(51900),i=(0,a.Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.options,(function(t,o){return n("div",{key:t.id,staticClass:"radio-group"},[n("label",{staticClass:"radio-group__label",class:e.fieldClasses(o),attrs:{for:e.noPrefixId?t.id:e.optionPrefix+t.id}},[n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.checkedRadioId,expression:"checkedRadioId"}],staticClass:"radio-group__input",class:t.class,attrs:{id:e.noPrefixId?t.id:e.optionPrefix+t.id,type:"radio",name:e.name,disabled:e.disabled||t.disabled},domProps:{value:t.id,checked:t.id==e.checkedRadioId,checked:e._q(e.checkedRadioId,t.id)},on:{change:[function(n){e.checkedRadioId=t.id},function(n){return e.$emit("change:radio",t.id)}]}},"input",t.customAttributes,!1)),e._v(" "),e.isHtml&&t.titleWithLink?n("span",{domProps:{innerHTML:e._s(t.titleWithLink)}}):[e._v("\n\t\t\t\t"+e._s(t.text||t.title)+"\n\t\t\t")],e._v(" "),t.tooltip?n("span",{staticClass:"kw-tooltip tooltipster",attrs:{"data-tooltip-text":t.tooltip,"data-tooltip-side":e.tooltipSide,"data-tooltip-theme":"dark"}}):e._e()],2)])})),0)}),[],!1,null,null,null).exports,s=n(79525),r={mixins:[s.Z],props:{text:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:null},withTags:{type:Boolean,default:!0},withSpaces:{type:Boolean,default:!0},clearMultipleSpaces:{type:Boolean,default:!0},blur:{type:Boolean,default:!1},forceMessage:{type:String,default:null},pattern:{type:String,default:""},lengthText:{type:Number,default:null},noSymbolsText:{type:Boolean,default:!1}},data:function(){return{mode:null,isBlur:!1,error:!1,isWarning:!1}},computed:{count:function(){return this.getTextLength()},output:function(){if(null!==this.forceMessage)return this.forceMessage;if(""!==this.pattern)return this.pattern.replace("[min]",this.count).replace("[max]",this.max);var e="";switch(this.mode){case"max":e=this.noSymbolsText?l("maxText","components/text-counter",[this.count,this.max]):l("maxSymbolsText","components/text-counter",[this.count,this.max]);break;case"min":e=this.noSymbolsText?l("minText","components/text-counter",[this.count,this.max]):l("minSymbolsText","components/text-counter",[this.count,this.max]);break;case"both":e=this.noSymbolsText?l("bothText","components/text-counter",[this.count,this.max,this.min]):l("bothSymbolsText","components/text-counter",[this.count,this.max,this.min])}return e}},watch:{text:function(){this.checkText()},blur:function(e){e&&this.checkText()}},created:function(){this.getMode(),this.checkText()},methods:{getMode:function(){!this.min&&this.max?this.mode="max":this.min&&!this.max?this.mode="min":this.min&&this.max&&(this.mode="both")},checkText:function(){var e=!1;switch(this.mode){case"max":e=this.checkMax();break;case"min":e=this.checkMin();break;case"both":(e=this.checkMin())||(e=this.checkMax())}e?this.$emit("error"):this.$emit("success"),this.error=e},checkMin:function(){var e=!1;return this.count<this.min&&(e=!0),e&&this.blur&&!this.isBlur&&(this.isBlur=!0),e||!this.isBlur||this.blur||(this.isBlur=!1),e&&this.isBlur},checkMax:function(){return this.count>this.max},updateText:function(){var e=this.text;e=this.clearSpaces(e).slice(0,this.max).trim(),this.$emit("update",e)},getTextLength:function(){if(null!==this.lengthText)return this.lengthText;var e=this.text;if(this.clearMultipleSpaces&&(e=this.clearSpaces(e)),!this.withTags){e=e.replace(/<\/?[^>]*>/gi,"")}if(!this.withSpaces){e=e.replace(/\s/gi,"")}return emojiReplacements.fancyCount(e)},clearSpaces:function(e){return(e||"").replace(/( |&nbsp;)( |&nbsp;)+/g," ")}}},c=n(72446),u=n.n(c),d=n(54427),p={insert:"head",singleton:!1},f=(u()(d.Z,p),d.Z.locals,(0,a.Z)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"tcounter",class:{"tcounter-error":e.isWarning||e.error}},[e._v(e._s(e.output))])}),[],!1,null,null,null).exports);function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"uploadedFileIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.substring(e.lastIndexOf(".")+1).toLowerCase(),o="default";return _.indexOf(["doc","docx"],n)>=0?o="word":_.indexOf(["xls","xlsx","csv"],n)>=0?o="excel":_.indexOf(["ppt","pptx","pptm"],n)>=0?o="powerpoint":_.indexOf(["pdf"],n)>=0?o="pdf":_.indexOf(["txt","ini","cfg","rtf","html"],n)>=0?o="alt":_.indexOf(["php","js","cpp","css","scss","cs"],n)>=0?o="code":_.indexOf(["mp3","wav","flac","midi","aac"],n)>=0?o="audio":_.indexOf(["wmv","avi","mp4","flv","mov","mkv","mpeg"],n)>=0?o="video":_.indexOf(["zip","7z","rar","rar5","tar","gz","gzip"],n)>=0?o="archive":_.indexOf(["png","jpg","jpeg","gif","raw","tif","cdr","bmp","tiff","ai","eps","svg","dib"],n)>=0?o="image":_.indexOf(["psd"],n)>=0&&(o="psd"),"file-icon file-icon--".concat(o+=t?" file-icon--small":"")}},{key:"getExtension",value:function(e){return _.lowerCase(e.substring(_.lastIndexOf(e,".")+1))}}],(n=null)&&h(t.prototype,n),o&&h(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),v={components:{RadioGroup:i,TextCounter:f},mixins:[s.Z],data:function(){return{dayPoll:window.dayPoll,isShowTab:!1,quizDayAnswersId:null,quizOpenAnswer:"",isQuizFinish:!1,isQuizHide:!1,isShownRefuseQuiz:!1,maxOpenAnswerLength:1500}},computed:{countAnswers:function(){return this.dayPoll.lastQuestionOrderIndex},currentQuestion:function(){return this.dayPoll.currentQuestion},currentAnswer:function(){return this.currentQuestion.order_index},isShowAnswersCount:function(){return this.countAnswers>1},textButton:function(){return this.countAnswers>this.currentAnswer?l("next","components/quiz-day"):l("finish","components/quiz-day")},answerListClass:function(){return["quiz-day__answers",{"quiz-day__answers--with-textarea":this.currentQuestion.isOpen}]},wrapperClass:function(){return["quiz-day__wrapper",{"quiz-day__wrapper--with-textarea":this.currentQuestion.isOpen}]},isSaveDisabled:function(){return!this.quizDayAnswersId&&(!this.quizOpenAnswer||""===this.quizOpenAnswer.trim())||this.$refs.textCounter&&this.$refs.textCounter.error}},created:function(){this.decodeCurrentOptions()},methods:{cancelRefuseQuiz:function(){this.isShownRefuseQuiz=!1},decodeCurrentOptions:function(){var e=this;this.dayPoll.currentQuestion.options&&_.forEach(this.dayPoll.currentQuestion.options,(function(t,n){window.defferScripts.on("heJs",(function(){e.$set(e.dayPoll.currentQuestion.options[n],"title",he.decode(t.title))}))}))},nextQuestion:function(){var e=this;if(null!==this.quizDayAnswersId||""!==this.quizOpenAnswer){var t={question_id:this.currentQuestion.id,option_id:this.quizDayAnswersId||null,open_answer:this.quizOpenAnswer&&window.emojiReplacements?window.emojiReplacements.preSubmitMessage(this.quizOpenAnswer):""};axios.post("/day_poll/save_answer",t).then((function(t){t.data.success&&null!==t.data.data?(e.dayPoll.currentQuestion=t.data.data,e.quizDayAnswersId=null,e.quizOpenAnswer="",e.decodeCurrentOptions()):null===t.data.data&&(e.isQuizFinish=!0,setTimeout((function(){e.isQuizHide=!0,e.isShowTab=!1}),3e3))})).catch((function(){}))}},filIcon:function(e){return m.uploadedFileIcon(e,!0)},unassignDayPoll:function(){axios.post("/day_poll/unassign",{disable_all_polls:0}).catch((function(){})),this.isQuizHide=!0,this.isShowTab=!1}}},g=(0,a.Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-day",class:{"quiz-day--active":e.isShowTab,"quiz-day--hide":e.isQuizHide}},[n("div",{class:e.wrapperClass},[n("div",{staticClass:"quiz-day__panel",on:{click:function(t){e.isShowTab=!e.isShowTab}}},[n("span",[e._v(e._s(e.l("pollOfTheDay","components/quiz-day")))])]),e._v(" "),n("div",{staticClass:"quiz-day__tab",class:{"quiz-day__tab--finish":e.isQuizFinish}},[e.isShownRefuseQuiz?[n("div",{staticClass:"quiz-day__confirm-block"},[n("div",{staticClass:"quiz-day__confirm-question"},[n("h4",[e._v("\n\t\t\t\t\t\t\t"+e._s(e.l("confirmHideCurPoll","components/quiz-day"))+"\n\t\t\t\t\t\t")])])]),e._v(" "),n("div",{staticClass:"quiz-day__footer justify-content-between"},[n("div",{staticClass:"quiz-day__button"},[n("button",{staticClass:"quiz-day__hide-cancel kw-button kw-button--size-48",on:{click:e.cancelRefuseQuiz}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.l("cancelBtnHidePoll","components/quiz-day"))+"\n\t\t\t\t\t\t")])]),e._v(" "),n("div",{staticClass:"quiz-day__button"},[n("button",{staticClass:"quiz-day__hide-confirm kw-button kw-button--size-48",on:{click:e.unassignDayPoll}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.l("confirmBtnHidePoll","components/quiz-day"))+"\n\t\t\t\t\t\t")])])])]:e.isQuizFinish?[n("div",{staticClass:"quiz-day__finish"},[n("div",{staticClass:"quiz-day__finish-img"}),e._v(" "),n("div",{staticClass:"quiz-day__finish-title"},[e._v(" "+e._s(e.l("thanksForVoting","components/quiz-day")))]),e._v(" "),n("div",{staticClass:"quiz-day__finish-text"},[e._v(e._s(e.l("yourAnswersWillHelpUsImproveKwork","components/quiz-day")))])])]:[n("div",{staticClass:"quiz-day__question-wrapper"},[n("div",{staticClass:"quiz-day__question",domProps:{innerHTML:e._s(e.currentQuestion.text)}}),e._v(" "),n("div",{staticClass:"popup-close-js popup-close cur",on:{click:function(t){e.isShownRefuseQuiz=!0}}},[e._v("\n\t\t\t\t\t\tX\n\t\t\t\t\t")])]),e._v(" "),e.currentQuestion.extra.length>0?n("div",{staticClass:"quiz-day__add-text",domProps:{innerHTML:e._s(e.currentQuestion.extra)}}):e._e(),e._v(" "),e.currentQuestion.files.length>0?n("div",{staticClass:"quiz-day__files"},e._l(e.currentQuestion.files,(function(t,o){return n("a",{key:o,attrs:{href:t.file_path,target:"_blank"}},[n("i",{class:e.filIcon(t.file_name)}),e._v(" "),n("span",[e._v(e._s(t.file_name))])])})),0):e._e(),e._v(" "),n("div",{class:e.answerListClass},[e.currentQuestion.isOpen?n("div",{staticClass:"quiz-day__open-answer"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.quizOpenAnswer,expression:"quizOpenAnswer"}],staticClass:"quiz-day__open-answer-field",attrs:{placeholder:e.l("enterAnswer","components/quiz-day")},domProps:{value:e.quizOpenAnswer},on:{input:function(t){t.target.composing||(e.quizOpenAnswer=t.target.value)}}}),e._v(" "),n("div",{staticClass:"qiuz-day__open-answer-counter"},[n("text-counter",{ref:"textCounter",attrs:{text:e.quizOpenAnswer,max:e.maxOpenAnswerLength}})],1)]):n("radio-group",{attrs:{options:e.currentQuestion.options},model:{value:e.quizDayAnswersId,callback:function(t){e.quizDayAnswersId=t},expression:"quizDayAnswersId"}})],1),e._v(" "),n("div",{staticClass:"quiz-day__footer",class:{"justify-content-between":e.isShowAnswersCount}},[e.isShowAnswersCount?n("div",{staticClass:"quiz-day__count"},[e._v("\n\t\t\t\t\t\t"+e._s(e.l("question","components/quiz-day"))+" "+e._s(e.currentAnswer)+"/"+e._s(e.countAnswers)+"\n\t\t\t\t\t")]):e._e(),e._v(" "),n("div",{staticClass:"quiz-day__button"},[n("button",{staticClass:"kw-button kw-button--green kw-button--size-48",class:{"disabled kw-button--inactive":e.isSaveDisabled},on:{click:e.nextQuestion}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.textButton)+"\n\t\t\t\t\t\t")])])])]],2)]),e._v(" "),n("div",{staticClass:"quiz-day__overlay",on:{click:function(t){e.isShowTab=!1}}})])}),[],!1,null,null,null).exports},23924:function(e,t,n){"use strict";n.d(t,{Z:function(){return at}});var o=n(47933);function a(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function i(e){return e instanceof a(e).Element||e instanceof Element}function s(e){return e instanceof a(e).HTMLElement||e instanceof HTMLElement}function r(e){return"undefined"!=typeof ShadowRoot&&(e instanceof a(e).ShadowRoot||e instanceof ShadowRoot)}var l=Math.max,c=Math.min,u=Math.round;function d(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),o=1,a=1;if(s(e)&&t){var i=e.offsetHeight,r=e.offsetWidth;r>0&&(o=u(n.width)/r||1),i>0&&(a=u(n.height)/i||1)}return{width:n.width/o,height:n.height/a,top:n.top/a,right:n.right/o,bottom:n.bottom/a,left:n.left/o,x:n.left/o,y:n.top/a}}function p(e){var t=a(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function f(e){return e?(e.nodeName||"").toLowerCase():null}function h(e){return((i(e)?e.ownerDocument:e.document)||window.document).documentElement}function m(e){return d(h(e)).left+p(e).scrollLeft}function v(e){return a(e).getComputedStyle(e)}function g(e){var t=v(e),n=t.overflow,o=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+o)}function b(e,t,n){void 0===n&&(n=!1);var o,i,r=s(t),l=s(t)&&function(e){var t=e.getBoundingClientRect(),n=u(t.width)/e.offsetWidth||1,o=u(t.height)/e.offsetHeight||1;return 1!==n||1!==o}(t),c=h(t),v=d(e,l),b={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(r||!r&&!n)&&(("body"!==f(t)||g(c))&&(b=(o=t)!==a(o)&&s(o)?{scrollLeft:(i=o).scrollLeft,scrollTop:i.scrollTop}:p(o)),s(t)?((w=d(t,!0)).x+=t.clientLeft,w.y+=t.clientTop):c&&(w.x=m(c))),{x:v.left+b.scrollLeft-w.x,y:v.top+b.scrollTop-w.y,width:v.width,height:v.height}}function w(e){var t=d(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function y(e){return"html"===f(e)?e:e.assignedSlot||e.parentNode||(r(e)?e.host:null)||h(e)}function k(e){return["html","body","#document"].indexOf(f(e))>=0?e.ownerDocument.body:s(e)&&g(e)?e:k(y(e))}function C(e,t){var n;void 0===t&&(t=[]);var o=k(e),i=o===(null==(n=e.ownerDocument)?void 0:n.body),s=a(o),r=i?[s].concat(s.visualViewport||[],g(o)?o:[]):o,l=t.concat(r);return i?l:l.concat(C(y(r)))}function x(e){return["table","td","th"].indexOf(f(e))>=0}function S(e){return s(e)&&"fixed"!==v(e).position?e.offsetParent:null}function P(e){for(var t=a(e),n=S(e);n&&x(n)&&"static"===v(n).position;)n=S(n);return n&&("html"===f(n)||"body"===f(n)&&"static"===v(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&s(e)&&"fixed"===v(e).position)return null;var n=y(e);for(r(n)&&(n=n.host);s(n)&&["html","body"].indexOf(f(n))<0;){var o=v(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(e)||t}var E="top",j="bottom",O="right",T="left",B="auto",A=[E,j,O,T],I="start",L="end",M="viewport",R="popper",D=A.reduce((function(e,t){return e.concat([t+"-"+I,t+"-"+L])}),[]),N=[].concat(A,[B]).reduce((function(e,t){return e.concat([t,t+"-"+I,t+"-"+L])}),[]),V=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function F(e){var t=new Map,n=new Set,o=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var o=t.get(e);o&&a(o)}})),o.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),o}var q={placement:"bottom",modifiers:[],strategy:"absolute"};function z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function U(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,o=void 0===n?[]:n,a=t.defaultOptions,s=void 0===a?q:a;return function(e,t,n){void 0===n&&(n=s);var a,r,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},q,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],u=!1,d={state:l,setOptions:function(n){var a="function"==typeof n?n(l.options):n;p(),l.options=Object.assign({},s,l.options,a),l.scrollParents={reference:i(e)?C(e):e.contextElement?C(e.contextElement):[],popper:C(t)};var r=function(e){var t=F(e);return V.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(o,l.options.modifiers)));return l.orderedModifiers=r.filter((function(e){return e.enabled})),l.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,o=void 0===n?{}:n,a=e.effect;if("function"==typeof a){var i=a({state:l,name:t,instance:d,options:o}),s=function(){};c.push(i||s)}})),d.update()},forceUpdate:function(){if(!u){var e=l.elements,t=e.reference,n=e.popper;if(z(t,n)){l.rects={reference:b(t,P(n),"fixed"===l.options.strategy),popper:w(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach((function(e){return l.modifiersData[e.name]=Object.assign({},e.data)}));for(var o=0;o<l.orderedModifiers.length;o++)if(!0!==l.reset){var a=l.orderedModifiers[o],i=a.fn,s=a.options,r=void 0===s?{}:s,c=a.name;"function"==typeof i&&(l=i({state:l,options:r,name:c,instance:d})||l)}else l.reset=!1,o=-1}}},update:(a=function(){return new Promise((function(e){d.forceUpdate(),e(l)}))},function(){return r||(r=new Promise((function(e){Promise.resolve().then((function(){r=void 0,e(a())}))}))),r}),destroy:function(){p(),u=!0}};if(!z(e,t))return d;function p(){c.forEach((function(e){return e()})),c=[]}return d.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var H={passive:!0};function G(e){return e.split("-")[0]}function W(e){return e.split("-")[1]}function K(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function J(e){var t,n=e.reference,o=e.element,a=e.placement,i=a?G(a):null,s=a?W(a):null,r=n.x+n.width/2-o.width/2,l=n.y+n.height/2-o.height/2;switch(i){case E:t={x:r,y:n.y-o.height};break;case j:t={x:r,y:n.y+n.height};break;case O:t={x:n.x+n.width,y:l};break;case T:t={x:n.x-o.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?K(i):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case I:t[c]=t[c]-(n[u]/2-o[u]/2);break;case L:t[c]=t[c]+(n[u]/2-o[u]/2)}}return t}var Q={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Z(e){var t,n=e.popper,o=e.popperRect,i=e.placement,s=e.variation,r=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,p=e.roundOffsets,f=e.isFixed,m=r.x,g=void 0===m?0:m,b=r.y,w=void 0===b?0:b,y="function"==typeof p?p({x:g,y:w}):{x:g,y:w};g=y.x,w=y.y;var _=r.hasOwnProperty("x"),k=r.hasOwnProperty("y"),C=T,x=E,$=window;if(d){var S=P(n),B="clientHeight",A="clientWidth";if(S===a(n)&&"static"!==v(S=h(n)).position&&"absolute"===l&&(B="scrollHeight",A="scrollWidth"),S=S,i===E||(i===T||i===O)&&s===L)x=j,w-=(f&&S===$&&$.visualViewport?$.visualViewport.height:S[B])-o.height,w*=c?1:-1;if(i===T||(i===E||i===j)&&s===L)C=O,g-=(f&&S===$&&$.visualViewport?$.visualViewport.width:S[A])-o.width,g*=c?1:-1}var I,M=Object.assign({position:l},d&&Q),R=!0===p?function(e){var t=e.x,n=e.y,o=window.devicePixelRatio||1;return{x:u(t*o)/o||0,y:u(n*o)/o||0}}({x:g,y:w}):{x:g,y:w};return g=R.x,w=R.y,c?Object.assign({},M,((I={})[x]=k?"0":"",I[C]=_?"0":"",I.transform=($.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",I)):Object.assign({},M,((t={})[x]=k?w+"px":"",t[C]=_?g+"px":"",t.transform="",t))}var Y={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,o=e.name,a=n.offset,i=void 0===a?[0,0]:a,s=N.reduce((function(e,n){return e[n]=function(e,t,n){var o=G(e),a=[T,E].indexOf(o)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=i[0],r=i[1];return s=s||0,r=(r||0)*a,[T,O].indexOf(o)>=0?{x:r,y:s}:{x:s,y:r}}(n,t.rects,i),e}),{}),r=s[t.placement],l=r.x,c=r.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[o]=s}},X={left:"right",right:"left",bottom:"top",top:"bottom"};function ee(e){return e.replace(/left|right|bottom|top/g,(function(e){return X[e]}))}var te={start:"end",end:"start"};function ne(e){return e.replace(/start|end/g,(function(e){return te[e]}))}function oe(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&r(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function ae(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ie(e,t){return t===M?ae(function(e){var t=a(e),n=h(e),o=t.visualViewport,i=n.clientWidth,s=n.clientHeight,r=0,l=0;return o&&(i=o.width,s=o.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(r=o.offsetLeft,l=o.offsetTop)),{width:i,height:s,x:r+m(e),y:l}}(e)):i(t)?function(e){var t=d(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):ae(function(e){var t,n=h(e),o=p(e),a=null==(t=e.ownerDocument)?void 0:t.body,i=l(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=l(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),r=-o.scrollLeft+m(e),c=-o.scrollTop;return"rtl"===v(a||n).direction&&(r+=l(n.clientWidth,a?a.clientWidth:0)-i),{width:i,height:s,x:r,y:c}}(h(e)))}function se(e,t,n){var o="clippingParents"===t?function(e){var t=C(y(e)),n=["absolute","fixed"].indexOf(v(e).position)>=0&&s(e)?P(e):e;return i(n)?t.filter((function(e){return i(e)&&oe(e,n)&&"body"!==f(e)})):[]}(e):[].concat(t),a=[].concat(o,[n]),r=a[0],u=a.reduce((function(t,n){var o=ie(e,n);return t.top=l(o.top,t.top),t.right=c(o.right,t.right),t.bottom=c(o.bottom,t.bottom),t.left=l(o.left,t.left),t}),ie(e,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function re(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function le(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ce(e,t){void 0===t&&(t={});var n=t,o=n.placement,a=void 0===o?e.placement:o,s=n.boundary,r=void 0===s?"clippingParents":s,l=n.rootBoundary,c=void 0===l?M:l,u=n.elementContext,p=void 0===u?R:u,f=n.altBoundary,m=void 0!==f&&f,v=n.padding,g=void 0===v?0:v,b=re("number"!=typeof g?g:le(g,A)),w=p===R?"reference":R,y=e.rects.popper,_=e.elements[m?w:p],k=se(i(_)?_:_.contextElement||h(e.elements.popper),r,c),C=d(e.elements.reference),x=J({reference:C,element:y,strategy:"absolute",placement:a}),$=ae(Object.assign({},y,x)),S=p===R?$:C,P={top:k.top-S.top+b.top,bottom:S.bottom-k.bottom+b.bottom,left:k.left-S.left+b.left,right:S.right-k.right+b.right},T=e.modifiersData.offset;if(p===R&&T){var B=T[a];Object.keys(P).forEach((function(e){var t=[O,j].indexOf(e)>=0?1:-1,n=[E,j].indexOf(e)>=0?"y":"x";P[e]+=B[n]*t}))}return P}var ue={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var a=n.mainAxis,i=void 0===a||a,s=n.altAxis,r=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,h=void 0===f||f,m=n.allowedAutoPlacements,v=t.options.placement,g=G(v),b=l||(g===v||!h?[ee(v)]:function(e){if(G(e)===B)return[];var t=ee(e);return[ne(e),t,ne(t)]}(v)),w=[v].concat(b).reduce((function(e,n){return e.concat(G(n)===B?function(e,t){void 0===t&&(t={});var n=t,o=n.placement,a=n.boundary,i=n.rootBoundary,s=n.padding,r=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?N:l,u=W(o),d=u?r?D:D.filter((function(e){return W(e)===u})):A,p=d.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=d);var f=p.reduce((function(t,n){return t[n]=ce(e,{placement:n,boundary:a,rootBoundary:i,padding:s})[G(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),y=t.rects.reference,_=t.rects.popper,k=new Map,C=!0,x=w[0],$=0;$<w.length;$++){var S=w[$],P=G(S),L=W(S)===I,M=[E,j].indexOf(P)>=0,R=M?"width":"height",V=ce(t,{placement:S,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),F=M?L?O:T:L?j:E;y[R]>_[R]&&(F=ee(F));var q=ee(F),z=[];if(i&&z.push(V[P]<=0),r&&z.push(V[F]<=0,V[q]<=0),z.every((function(e){return e}))){x=S,C=!1;break}k.set(S,z)}if(C)for(var U=function(e){var t=w.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},H=h?3:1;H>0;H--){if("break"===U(H))break}t.placement!==x&&(t.modifiersData[o]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function de(e,t,n){return l(e,c(t,n))}var pe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name,a=n.mainAxis,i=void 0===a||a,s=n.altAxis,r=void 0!==s&&s,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.padding,h=n.tether,m=void 0===h||h,v=n.tetherOffset,g=void 0===v?0:v,b=ce(t,{boundary:u,rootBoundary:d,padding:f,altBoundary:p}),y=G(t.placement),_=W(t.placement),k=!_,C=K(y),x="x"===C?"y":"x",$=t.modifiersData.popperOffsets,S=t.rects.reference,B=t.rects.popper,A="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,L="number"==typeof A?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),M=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if($){if(i){var D,N="y"===C?E:T,V="y"===C?j:O,F="y"===C?"height":"width",q=$[C],z=q+b[N],U=q-b[V],H=m?-B[F]/2:0,J=_===I?S[F]:B[F],Q=_===I?-B[F]:-S[F],Z=t.elements.arrow,Y=m&&Z?w(Z):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=X[N],te=X[V],ne=de(0,S[F],Y[F]),oe=k?S[F]/2-H-ne-ee-L.mainAxis:J-ne-ee-L.mainAxis,ae=k?-S[F]/2+H+ne+te+L.mainAxis:Q+ne+te+L.mainAxis,ie=t.elements.arrow&&P(t.elements.arrow),se=ie?"y"===C?ie.clientTop||0:ie.clientLeft||0:0,re=null!=(D=null==M?void 0:M[C])?D:0,le=q+ae-re,ue=de(m?c(z,q+oe-re-se):z,q,m?l(U,le):U);$[C]=ue,R[C]=ue-q}if(r){var pe,fe="x"===C?E:T,he="x"===C?j:O,me=$[x],ve="y"===x?"height":"width",ge=me+b[fe],be=me-b[he],we=-1!==[E,T].indexOf(y),ye=null!=(pe=null==M?void 0:M[x])?pe:0,_e=we?ge:me-S[ve]-B[ve]-ye+L.altAxis,ke=we?me+S[ve]+B[ve]-ye-L.altAxis:be,Ce=m&&we?function(e,t,n){var o=de(e,t,n);return o>n?n:o}(_e,me,ke):de(m?_e:ge,me,m?ke:be);$[x]=Ce,R[x]=Ce-me}t.modifiersData[o]=R}},requiresIfExists:["offset"]};var fe={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,o=e.name,a=e.options,i=n.elements.arrow,s=n.modifiersData.popperOffsets,r=G(n.placement),l=K(r),c=[T,O].indexOf(r)>=0?"height":"width";if(i&&s){var u=function(e,t){return re("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:le(e,A))}(a.padding,n),d=w(i),p="y"===l?E:T,f="y"===l?j:O,h=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],v=P(i),g=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,b=h/2-m/2,y=u[p],_=g-d[c]-u[f],k=g/2-d[c]/2+b,C=de(y,k,_),x=l;n.modifiersData[o]=((t={})[x]=C,t.centerOffset=C-k,t)}},effect:function(e){var t=e.state,n=e.options.element,o=void 0===n?"[data-popper-arrow]":n;null!=o&&("string"!=typeof o||(o=t.elements.popper.querySelector(o)))&&oe(t.elements.popper,o)&&(t.elements.arrow=o)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function he(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function me(e){return[E,O,j,T].some((function(t){return e[t]>=0}))}var ve=U({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,i=o.scroll,s=void 0===i||i,r=o.resize,l=void 0===r||r,c=a(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach((function(e){e.addEventListener("scroll",n.update,H)})),l&&c.addEventListener("resize",n.update,H),function(){s&&u.forEach((function(e){e.removeEventListener("scroll",n.update,H)})),l&&c.removeEventListener("resize",n.update,H)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=J({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,o=n.gpuAcceleration,a=void 0===o||o,i=n.adaptive,s=void 0===i||i,r=n.roundOffsets,l=void 0===r||r,c={placement:G(t.placement),variation:W(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Z(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Z(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},a=t.elements[e];s(a)&&f(a)&&(Object.assign(a.style,n),Object.keys(o).forEach((function(e){var t=o[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],a=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});s(o)&&f(o)&&(Object.assign(o.style,i),Object.keys(a).forEach((function(e){o.removeAttribute(e)})))}))}},requires:["computeStyles"]},Y,ue,pe,fe,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,o=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,s=ce(t,{elementContext:"reference"}),r=ce(t,{altBoundary:!0}),l=he(s,o),c=he(r,a,i),u=me(l),d=me(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),ge={subtree:!0,childList:!0,characterData:!0,attributes:!0,attributeFilter:["style","class"]},be={mixins:[o.Z],props:{customFooterClass:{type:String,default:""},childPopup:{type:Boolean,default:!1},hideHeader:{type:Boolean,default:!1},value:{type:Boolean,default:!1},title:{type:String,default:""},modalClass:{type:[String,Array,Object],default:null},design:{type:String,default:"default"},designModifier:{type:[String,Array],default:""},backdrop:{type:String,default:""},noCloseOnBackdrop:{type:Boolean,default:!1},isCloseOnEscape:{type:Boolean,default:!1},animation:{type:String,default:"k-modal-slide"},closeAnimation:{type:Boolean,default:!1},backdropAnimation:{type:String,default:null},swipeClose:{type:Boolean,default:!1},isSingleButton:{type:Boolean,default:!1},hasCloseButton:{type:Boolean,default:!0},isRelativePosition:{type:Boolean,default:!1},popperRelativeElement:{type:Element,default:null},popperOffsetParams:{type:Object,default:function(){return{}}},isLogicHideBackdrop:{type:Boolean,default:!0}},data:function(){return{mustShowComponent:!1,mustShowDialog:!1,isHandlersEnabled:!1,isContentTouch:!1,handlersTimeout:!1,overlayHasScroll:!1,contentClass:".k-modal-content",bodyClasses:".k-modal-content__body, .k-modal-content__footer",isHeaderSwipe:!1,diableBodySwipe:!1,backdropIsVisible:!1,dialogTransition:"",runTransition:!1,touchStartY:-1,touchMoveY:-1,popper:null,bootstrapModalKeepBackdropClass:".keep-backdrop-modal:visible",haveBootstrapBackdrop:!1}},computed:{hideBackdrop:function(){return this.isLogicHideBackdrop&&window.bus.shared.kModals&&window.bus.shared.kModals.length>1&&window.bus.shared.kModals.indexOf(this.localId)>0},outerClass:function(){var e=[];if(this.isValidPopperParams||e.push("k-modal-outer"),!this.design)return e;var t="k-modal--"+this.design;if(e.push(t),this.designModifier){var n=Array.isArray(this.designModifier)?this.designModifier:[this.designModifier];_.forEach(n,(function(t){t.length>0&&e.push("k-modal--m-"+t)}))}return e},overlayClass:function(){return{"k-modal-overlay":!this.isValidPopperParams}},dialogClass:function(){if(!this.animation||!this.dialogTransition)return null;var e=this.animation+"-"+this.dialogTransition,t=[e+"-active"];return"enter"==this.dialogTransition?this.runTransition||t.push(e):this.runTransition&&t.push(e+"-to"),t},backdropClass:function(){var e="";return e=this.hideBackdrop?"k-modal-backdrop--hidden":this.backdrop?"k-modal-backdrop--".concat(this.backdrop):null,[{"k-modal-backdrop":!this.isValidPopperParams},e]},overlayStyle:function(){return this.overlayHasScroll?{"padding-left":this.scrollbarWidth+"px"}:null},hasHeader:function(){return!this.hideHeader&&"youtube"!=this.design},hasBody:function(){return this.$slots.default},hasFooter:function(){return this.$slots.footer},hasHeaderImg:function(){return this.$slots["header-img"]},isValidPopperParams:function(){return this.isRelativePosition&&null!==this.popperRelativeElement}},watch:{value:function(){var e=this;this.handleValueState(),this.value&&this.backdropAnimation?setTimeout((function(){e.backdropIsVisible=e.value})):this.backdropIsVisible=this.value},mustShowComponent:function(){var e=this;this.mustShowComponent!=this.isHandlersEnabled&&(this.updateBodyPadding(this.mustShowComponent),this.mustShowComponent?(this.handlersTimeout&&clearTimeout(this.handlersTimeout),this.handlersTimeout=setTimeout((function(){e.checkIsRendered()&&(e.toggleHandlers(!0),e.$emit("shown"))}))):(this.checkIsRendered()&&this.toggleHandlers(!1),this.handlersTimeout&&clearTimeout(this.handlersTimeout),setTimeout((function(){e.checkIsRendered()||e.$emit("hidden")}))),this.isHandlersEnabled=this.mustShowComponent)},mobileVersion:function(){this.processPopper()}},created:function(){var e=this,t=1;window.kModalLastId&&(t=window.kModalLastId+1),window.kModalLastId=t,this.localId=t,window.bus.shared.kModals||this.$set(window.bus.shared,"kModals",[]),"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver((function(){e.updateBodyPadding()})))},mounted:function(){this.handleValueState()},beforeDestroy:function(){this.toggleHandlers(!1),this.removeGlobalId(),$(window).off("orientationchange",this.updatePopperOnOrientationChange.bind(this))},destroyed:function(){this.childPopup||this.isValidPopperParams||$("body").toggleClass("modal-open",!1).css("padding-right","")},updated:function(){this.popper&&this.popper.update()},methods:{addGlobalId:function(){window.bus.shared.kModals.indexOf(this.localId)<0&&window.bus.shared.kModals.push(this.localId)},removeGlobalId:function(){var e=window.bus.shared.kModals.indexOf(this.localId);e>=0&&window.bus.shared.kModals.splice(e,1)},checkIsRendered:function(){return this.$refs&&this.$refs.overlay},handleValueState:function(){var e=this;if(this.value!=this.mustShowDialog)if(this.value?this.addGlobalId():this.removeGlobalId(),this.haveBootstrapBackdrop=$(this.bootstrapModalKeepBackdropClass).length>0,this.$emit(this.value?"show":"hide"),this.mustShowDialog=this.value,this.value&&(this.mustShowComponent=this.value,this.processPopper()),this.animation&&(this.value||this.closeAnimation)){var t=this.value?"enter":"leave";this.dialogTransition=t,setTimeout((function(){e.dialogTransition==t&&(e.runTransition=!0)}))}else this.value||(this.dialogTransition="",this.runTransition=!1,this.mustShowComponent=!1)},processPopper:function(){var e=this;this.isValidPopperParams?this.$nextTick((function(){e.$refs.content&&(e.popper=ve(e.popperRelativeElement,e.$refs.content,e.popperOffsetParams),$(window).on("orientationchange",e.updatePopperOnOrientationChange.bind(e)),$("body").removeClass("modal-open",!1).css("padding-right",""),setTimeout((function(){e.popper.update()})))})):this.popper&&(this.popper.destroy(),this.popper=null,$(window).off("orientationchange",this.updatePopperOnOrientationChange.bind(this)))},updatePopper:function(){this.popper&&this.popper.update()},updatePopperOnOrientationChange:function(){var e=this;this.popper&&setTimeout((function(){e.updatePopper()}),500)},toggleHandlers:function(e){this.updateResizeObserving(e)},onTransitionEnd:function(){var e=this.dialogTransition;this.dialogTransition="",this.runTransition=!1,"leave"==e?(this.$emit("leave"),this.mustShowComponent=!1):"enter"==e&&this.$emit("enter")},updateResizeObserving:function(e){e?this.enableResizeObserving():this.disableResizeObserving()},enableResizeObserving:function(){window.bus.$on("update-modal-content",this.updateBodyPadding),$(window).on("resize",this.updateBodyPadding),$(document).on("keydown",this.onKeyDown),this.observer&&this.checkIsRendered()&&this.observer.observe(this.$refs.overlay,ge)},disableResizeObserving:function(){window.bus.$off("update-modal-content",this.updateBodyPadding),$(window).off("resize",this.updateBodyPadding),$(document).off("keydown",this.onKeyDown),this.observer&&this.observer.disconnect()},updateBodyPadding:function(e){var t="",n=this.value;if(!0!==e&&!1!==e||(n=e),this.$refs&&this.$refs.overlay&&(this.overlayHasScroll=this.$refs.overlay.scrollHeight>this.$refs.overlay.clientHeight),n&&(t=Utils.getScrollBarWidth(),this.scrollbarWidth=t),!(!e&&this.childPopup||this.isRelativePosition||window.modalOpened||$(this.bootstrapModalKeepBackdropClass).length>0)){var o=n||window.bus.shared.kModals&&window.bus.shared.kModals.length>0;$("body").toggleClass("modal-open",o).css("padding-right",o?this.scrollbarWidth:"")}},closeModal:function(){this.value&&(this.$emit("close"),this.$emit("input",!1))},overlayClick:function(e){this.noCloseOnBackdrop||$(e.target).is(".k-modal-overlay, .k-modal-dialog")&&this.closeModal()},onKeyDown:function(e){this.value&&this.isCloseOnEscape&&(e.key&&"Escape"===e.key||e.keyCode&&27===e.keyCode)&&this.closeModal()},touchStartHandler:function(e){var t=$(e.target);this.isContentTouch=t.is(this.contentClass)||t.closest(this.contentClass).length>0,this.swipeClose&&this.$refs.body&&e.touches&&e.touches.length&&(this.touchStartY=e.touches[0].clientY,this.touchMoveY=this.touchStartY,this.isHeaderSwipe=!t.is(this.bodyClasses)&&!t.closest(this.bodyClasses).length>0,this.isHeaderSwipe||(this.diableBodySwipe=this.$refs.body.scrollTop>1))},touchMoveHandler:function(e){this.isContentTouch||e.preventDefault(),!(this.touchStartY<0)&&this.swipeClose&&this.$refs.body&&e.touches&&e.touches.length&&(this.touchMoveY=e.touches[0].clientY)},touchEndHandler:function(){if(!(this.touchStartY<0)&&this.swipeClose&&this.$refs.body){var e=this.touchMoveY-this.touchStartY;this.touchStartY=-1,this.touchMoveY=-1,e>100&&(this.isHeaderSwipe||!this.diableBodySwipe&&this.$refs.body.scrollTop<=1)&&this.closeModal()}}}},we=n(51900),ye=(0,we.Z)(be,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.mustShowComponent?n("div",{class:e.outerClass,on:{touchstart:e.touchStartHandler,touchmove:e.touchMoveHandler,touchend:e.touchEndHandler}},[n("div",{ref:"overlay",class:e.overlayClass,style:e.overlayStyle,on:{click:e.overlayClick}},[n("div",{staticClass:"k-modal-dialog",class:e.dialogClass,on:{transitionend:e.onTransitionEnd}},[n("div",{ref:"content",staticClass:"k-modal-content",class:[e.modalClass,{"k-modal-content--header-img":e.hasHeaderImg}]},[e.hasHeader?n("div",{staticClass:"k-modal-content__header",class:{"k-modal-content__header--no-close":!e.hasCloseButton}},[e.hasHeaderImg?n("div",{staticClass:"k-modal-content__header-img"},[e._t("header-img")],2):e._e(),e._v(" "),e._t("header",(function(){return[e.hasCloseButton?n("div",{staticClass:"k-modal-content__header-close",on:{click:function(t){return e.closeModal()}}}):e._e(),e._v(" "),e.$slots["header-content"]?[n("div",{staticClass:"header-group"},[n("div",{staticClass:"k-modal-content__header-title"},[e._v(e._s(e.title))]),e._v(" "),e._t("header-content")],2)]:n("div",{staticClass:"k-modal-content__header-title"},[e._v(e._s(e.title))])]}))],2):e._e(),e._v(" "),e.hasBody?n("div",{ref:"body",staticClass:"k-modal-content__body",class:{"k-modal-content__body--no-border-radius":e.hasFooter},on:{scroll:function(t){return e.$emit("scroll")}}},[e._t("default")],2):e._e(),e._v(" "),e.hasFooter?n("div",{staticClass:"k-modal-content__footer",class:[{"k-modal-content__footer--single":e.isSingleButton},e.customFooterClass]},[e._t("footer")],2):e._e()])])]),e._v(" "),n("transition",{attrs:{name:e.backdropAnimation}},[e.backdropIsVisible?n("div",{class:e.backdropClass}):e._e()])],1):e._e()}),[],!1,null,null,null).exports,_e={methods:{cdnBaseUrl:function(e){return Utils.cdnBaseUrl(e)},cdnImageUrl:function(e){return Utils.cdnImageUrl(e)},cdnAdminUrl:function(e){return Utils.cdnAdminUrl(e)},cdnPortfolioUrl:function(e){return Utils.cdnPortfolioUrl(e)},cdnCatCoverUrl:function(e){return Utils.cdnCatCoverUrl(e)}}},ke={mixins:[_e,n(79525).Z],props:{paymentSum:{type:String,default:""}},data:function(){return{bankSearch:"",listBank:[{src:"sber.png",name:"Сбербанк"},{src:"vtb.png",name:"ВТБ"},{src:"rajffajzen.jpg",name:"Райффайзен Банк"},{src:"tinkoff.jpg",name:"Тинькофф"},{src:"alfa.png",name:"Альфа-Банк"},{src:"promsvyaz.png",name:"Промсвязьбанк"},{src:"gazprombank.png",name:"Газпромбанк"},{src:"otkrytie.jpg",name:"Открытие"},{src:"rosselhozbank.jpg",name:"Россельхозбанк"},{src:"rosbank.png",name:"Росбанк"},{src:"sovkombank.png",name:"Совкомбанк"},{src:"yunikredit.jpg",name:"Юникредит Банк"},{src:"avangard.jpg",name:"Авангард"}],isErrorBank:!1}},computed:{listBankSearch:function(){var e=this;return _.filter(this.listBank,(function(t){return _.startsWith(_.lowerCase(t.name),e.bankSearch)}))},showListBank:function(){return this.bankSearch.length<1||this.bankSearch.length>0&&this.listBankSearch.length<1?this.listBank:this.listBankSearch}},methods:{openBank:function(){var e=this;this.isErrorBank=!0,setTimeout((function(){e.isErrorBank=!1}),5e3),this.$refs["bank-error"].scrollIntoView({behavior:"smooth"})}}},Ce=(0,we.Z)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isErrorBank,expression:"isErrorBank"}],ref:"bank-error",staticClass:"sbp-bank__error"},[e._v("\n\t\tМы не нашли приложения выбранного банка на вашем устройстве\n\t")]),e._v(" "),n("p",{staticClass:"mb16 pb2"},[e._v("После выбора банка, у вас откроется банковское приложение, где вы сможете завершить оплату")]),e._v(" "),n("div",{staticClass:"sbp-bank__form-item form-item form-item--size-48"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.bankSearch,expression:"bankSearch"}],staticClass:"input-style",attrs:{placeholder:"Найти банк",type:"text"},domProps:{value:e.bankSearch},on:{input:function(t){t.target.composing||(e.bankSearch=t.target.value)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.bankSearch.length>0,expression:"bankSearch.length > 0"}],staticClass:"wrap-input-action__remove",on:{click:function(t){e.bankSearch=""}}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.listBankSearch.length<1&&e.bankSearch.length>0,expression:"listBankSearch.length < 1 && bankSearch.length > 0"}],staticClass:"sbp-bank__empty"},[n("div",{staticClass:"sbp-bank__empty-title"},[e._v("Банк не найден")]),e._v(" "),e._m(0)]),e._v(" "),n("div",{staticClass:"sbp-bank__list"},e._l(e.showListBank,(function(t,o){return n("div",{key:o,staticClass:"sbp-bank__item",on:{click:e.openBank}},[n("img",{attrs:{src:e.cdnImageUrl("/balance/bank/"+t.src),alt:"",width:"104",height:"104"}}),e._v(" "),n("span",[e._v(e._s(t.name))])])})),0)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"sbp-bank__empty-text"},[e._v("Попробуйте изменить запрос "),n("br"),e._v("или выберите из предложенных ниже")])}],!1,null,null,null).exports,xe=1,$e=2,Se=4,Pe=8;function Ee(e){this.mode=Se,this.data=e}Ee.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var je=Ee,Oe={L:1,M:0,Q:3,H:2};function Te(e,t){this.totalCount=e,this.dataCount=t}Te.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],Te.getRSBlocks=function(e,t){var n=Te.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=n.length/3,a=new Array,i=0;i<o;i++)for(var s=n[3*i+0],r=n[3*i+1],l=n[3*i+2],c=0;c<s;c++)a.push(new Te(r,l));return a},Te.getRsBlockTable=function(e,t){switch(t){case Oe.L:return Te.RS_BLOCK_TABLE[4*(e-1)+0];case Oe.M:return Te.RS_BLOCK_TABLE[4*(e-1)+1];case Oe.Q:return Te.RS_BLOCK_TABLE[4*(e-1)+2];case Oe.H:return Te.RS_BLOCK_TABLE[4*(e-1)+3];default:return}};var Be=Te;function Ae(){this.buffer=new Array,this.length=0}Ae.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var Ie=Ae,Le={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Le.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Le.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Me=0;Me<8;Me++)Le.EXP_TABLE[Me]=1<<Me;for(Me=8;Me<256;Me++)Le.EXP_TABLE[Me]=Le.EXP_TABLE[Me-4]^Le.EXP_TABLE[Me-5]^Le.EXP_TABLE[Me-6]^Le.EXP_TABLE[Me-8];for(Me=0;Me<255;Me++)Le.LOG_TABLE[Le.EXP_TABLE[Me]]=Me;var Re=Le;function De(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var o=0;o<e.length-n;o++)this.num[o]=e[o+n]}De.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=Re.gexp(Re.glog(this.get(n))+Re.glog(e.get(o)));return new De(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Re.glog(this.get(0))-Re.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(o=0;o<e.getLength();o++)n[o]^=Re.gexp(Re.glog(e.get(o))+t);return new De(n,0).mod(e)}};var Ne=De,Ve=0,Fe=1,qe=2,ze=3,Ue=4,He=5,Ge=6,We=7,Ke={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Ke.getBCHDigit(t)-Ke.getBCHDigit(Ke.G15)>=0;)t^=Ke.G15<<Ke.getBCHDigit(t)-Ke.getBCHDigit(Ke.G15);return(e<<10|t)^Ke.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Ke.getBCHDigit(t)-Ke.getBCHDigit(Ke.G18)>=0;)t^=Ke.G18<<Ke.getBCHDigit(t)-Ke.getBCHDigit(Ke.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return Ke.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case Ve:return(t+n)%2==0;case Fe:return t%2==0;case qe:return n%3==0;case ze:return(t+n)%3==0;case Ue:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case He:return t*n%2+t*n%3==0;case Ge:return(t*n%2+t*n%3)%2==0;case We:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Ne([1],0),n=0;n<e;n++)t=t.multiply(new Ne([1,Re.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case xe:return 10;case $e:return 9;case Se:case Pe:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case xe:return 12;case $e:return 11;case Se:return 16;case Pe:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case xe:return 14;case $e:return 13;case Se:return 16;case Pe:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,o=0;o<t;o++)for(var a=0;a<t;a++){for(var i=0,s=e.isDark(o,a),r=-1;r<=1;r++)if(!(o+r<0||t<=o+r))for(var l=-1;l<=1;l++)a+l<0||t<=a+l||0==r&&0==l||s==e.isDark(o+r,a+l)&&i++;i>5&&(n+=3+i-5)}for(o=0;o<t-1;o++)for(a=0;a<t-1;a++){var c=0;e.isDark(o,a)&&c++,e.isDark(o+1,a)&&c++,e.isDark(o,a+1)&&c++,e.isDark(o+1,a+1)&&c++,0!=c&&4!=c||(n+=3)}for(o=0;o<t;o++)for(a=0;a<t-6;a++)e.isDark(o,a)&&!e.isDark(o,a+1)&&e.isDark(o,a+2)&&e.isDark(o,a+3)&&e.isDark(o,a+4)&&!e.isDark(o,a+5)&&e.isDark(o,a+6)&&(n+=40);for(a=0;a<t;a++)for(o=0;o<t-6;o++)e.isDark(o,a)&&!e.isDark(o+1,a)&&e.isDark(o+2,a)&&e.isDark(o+3,a)&&e.isDark(o+4,a)&&!e.isDark(o+5,a)&&e.isDark(o+6,a)&&(n+=40);var u=0;for(a=0;a<t;a++)for(o=0;o<t;o++)e.isDark(o,a)&&u++;return n+=10*(Math.abs(100*u/t/t-50)/5)}},Je=Ke;function Qe(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Ze=Qe.prototype;Ze.addData=function(e){var t=new je(e);this.dataList.push(t),this.dataCache=null},Ze.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},Ze.getModuleCount=function(){return this.moduleCount},Ze.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Be.getRSBlocks(e,this.errorCorrectLevel),n=new Ie,o=0,a=0;a<t.length;a++)o+=t[a].dataCount;for(a=0;a<this.dataList.length;a++){var i=this.dataList[a];n.put(i.mode,4),n.put(i.getLength(),Je.getLengthInBits(i.mode,e)),i.write(n)}if(n.getLengthInBits()<=8*o)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},Ze.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=Qe.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},Ze.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var o=-1;o<=7;o++)t+o<=-1||this.moduleCount<=t+o||(this.modules[e+n][t+o]=0<=n&&n<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=o&&o<=4)},Ze.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var o=Je.getLostPoint(this);(0==n||e>o)&&(e=o,t=n)}return t},Ze.createMovieClip=function(e,t,n){var o=e.createEmptyMovieClip(t,n);this.make();for(var a=0;a<this.modules.length;a++)for(var i=1*a,s=0;s<this.modules[a].length;s++){var r=1*s;this.modules[a][s]&&(o.beginFill(0,100),o.moveTo(r,i),o.lineTo(r+1,i),o.lineTo(r+1,i+1),o.lineTo(r,i+1),o.endFill())}return o},Ze.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},Ze.setupPositionAdjustPattern=function(){for(var e=Je.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var o=e[t],a=e[n];if(null==this.modules[o][a])for(var i=-2;i<=2;i++)for(var s=-2;s<=2;s++)this.modules[o+i][a+s]=-2==i||2==i||-2==s||2==s||0==i&&0==s}},Ze.setupTypeNumber=function(e){for(var t=Je.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var o=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(n=0;n<18;n++){o=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}},Ze.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,o=Je.getBCHTypeInfo(n),a=0;a<15;a++){var i=!e&&1==(o>>a&1);a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(a=0;a<15;a++){i=!e&&1==(o>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e},Ze.mapData=function(e,t){for(var n=-1,o=this.moduleCount-1,a=7,i=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var r=0;r<2;r++)if(null==this.modules[o][s-r]){var l=!1;i<e.length&&(l=1==(e[i]>>>a&1)),Je.getMask(t,o,s-r)&&(l=!l),this.modules[o][s-r]=l,-1==--a&&(i++,a=7)}if((o+=n)<0||this.moduleCount<=o){o-=n,n=-n;break}}},Qe.PAD0=236,Qe.PAD1=17,Qe.createData=function(e,t,n){for(var o=Be.getRSBlocks(e,t),a=new Ie,i=0;i<n.length;i++){var s=n[i];a.put(s.mode,4),a.put(s.getLength(),Je.getLengthInBits(s.mode,e)),s.write(a)}var r=0;for(i=0;i<o.length;i++)r+=o[i].dataCount;if(a.getLengthInBits()>8*r)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*r+")");for(a.getLengthInBits()+4<=8*r&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*r||(a.put(Qe.PAD0,8),a.getLengthInBits()>=8*r));)a.put(Qe.PAD1,8);return Qe.createBytes(a,o)},Qe.createBytes=function(e,t){for(var n=0,o=0,a=0,i=new Array(t.length),s=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l;o=Math.max(o,l),a=Math.max(a,c),i[r]=new Array(l);for(var u=0;u<i[r].length;u++)i[r][u]=255&e.buffer[u+n];n+=l;var d=Je.getErrorCorrectPolynomial(c),p=new Ne(i[r],d.getLength()-1).mod(d);s[r]=new Array(d.getLength()-1);for(u=0;u<s[r].length;u++){var f=u+p.getLength()-s[r].length;s[r][u]=f>=0?p.get(f):0}}var h=0;for(u=0;u<t.length;u++)h+=t[u].totalCount;var m=new Array(h),v=0;for(u=0;u<o;u++)for(r=0;r<t.length;r++)u<i[r].length&&(m[v++]=i[r][u]);for(u=0;u<a;u++)for(r=0;r<t.length;r++)u<s[r].length&&(m[v++]=s[r][u]);return m};var Ye=Qe;var Xe={props:{value:{type:String,required:!0,default:""},className:{type:String,default:""},size:{type:[Number,String],default:100,validator:function(e){return!0!==isNaN(Number(e))}},level:{type:String,default:"L",validator:function(e){return["L","Q","M","H"].indexOf(e)>-1}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},renderAs:{type:String,required:!1,default:"canvas",validator:function(e){return["canvas","svg"].indexOf(e)>-1}}},data:function(){return{numCells:0,fgPath:""}},updated:function(){this.render()},mounted:function(){this.render()},methods:{render:function(){var e=this.value,t=this.size,n=this.level,o=this.background,a=this.foreground,i=this.renderAs,s=t>>>0,r=new Ye(-1,Oe[n]);r.addData(function(e){for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o<2048?(t+=String.fromCharCode(192|o>>6),t+=String.fromCharCode(128|63&o)):o<55296||o>=57344?(t+=String.fromCharCode(224|o>>12),t+=String.fromCharCode(128|o>>6&63),t+=String.fromCharCode(128|63&o)):(n++,o=65536+((1023&o)<<10|1023&e.charCodeAt(n)),t+=String.fromCharCode(240|o>>18),t+=String.fromCharCode(128|o>>12&63),t+=String.fromCharCode(128|o>>6&63),t+=String.fromCharCode(128|63&o))}return t}(e)),r.make();var l=r.modules,c=s/l.length,u=s/l.length,d=window.devicePixelRatio||1;if("svg"===i)this.numCells=l.length,this.fgPath=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];return e.forEach((function(e,o){var a=null;e.forEach((function(i,s){if(!i&&null!==a)return n.push("M".concat(a+t," ").concat(o+t,"h").concat(s-a,"v1H").concat(a+t,"z")),void(a=null);if(s!==e.length-1)i&&null===a&&(a=s);else{if(!i)return;null===a?n.push("M".concat(s+t,",").concat(o+t," h1v1H").concat(s+t,"z")):n.push("M".concat(a+t,",").concat(o+t," h").concat(s+1-a,"v1H").concat(a+t,"z"))}}))})),n.join("")}(l);else{var p=this.$refs["qrcode-vue"],f=p.getContext("2d");p.height=p.width=s*d,f.scale(d,d),l.forEach((function(e,t){e.forEach((function(e,n){f.fillStyle=e?a:o;var i=Math.ceil((n+1)*c)-Math.floor(n*c),s=Math.ceil((t+1)*u)-Math.floor(t*u);f.fillRect(Math.round(n*c),Math.round(t*u),i,s)}))}))}}},render:function(e){var t=this.className,n=this.value,o=this.level,a=this.background,i=this.foreground,s=this.size,r=this.renderAs,l=this.numCells,c=this.fgPath;return e("div",{class:this.class||t,attrs:{value:n,level:o,background:a,foreground:i}},["svg"===r?e("svg",{attrs:{height:s,width:s,shapeRendering:"crispEdges",viewBox:"0 0 ".concat(l," ").concat(l)},style:{width:s+"px",height:s+"px"}},[e("path",{attrs:{fill:a,d:"M0,0 h".concat(l,"v").concat(l,"H0z")}}),e("path",{attrs:{fill:i,d:c}})]):e("canvas",{attrs:{height:s,width:s},style:{width:s+"px",height:s+"px"},ref:"qrcode-vue"},[])])}},et={components:{QrcodeVue:Xe},mixins:[_e],props:{paymentSum:{type:String,default:""}},computed:{qrValue:function(){return"https://kwork.ru/"}}},tt=(0,we.Z)(et,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sbp-qr"},[n("div",{staticClass:"sbp-qr__info"},[n("img",{attrs:{src:e.cdnImageUrl("/balance/sbp@2x.png"),srcset:e.cdnImageUrl("/balance/sbp@2x.png 2x"),alt:"",width:"80",height:"48"}}),e._v(" "),n("div",{staticClass:"sbp-qr__text"},[e._v("Для оплаты зайдите в мобильное приложение вашего банка и отсканируйте QR-код")]),e._v(" "),n("div",{staticClass:"sbp-qr__sum"},[e._v("Сумма: "+e._s(e.paymentSum)+" "),n("span",{staticClass:"rouble"},[e._v("₽")])])]),e._v(" "),n("div",{staticClass:"sbp-qr__code"},[n("qrcode-vue",{attrs:{value:e.qrValue,size:"144",level:"H"}})],1)])}),[],!1,null,null,null).exports,nt={props:{childPopup:!1,name:{type:String,default:""},useOutOfFocus:{type:Boolean,default:!0}},data:function(){return{modalName:"",isModalOpened:!1,isApiRequestSended:!1,apiRequestName:"",externalData:{},childPopupLocal:!1,typeFile:""}},computed:{openEvent:function(){return"open-modal-".concat(this.actualModalName)},closeEvent:function(){return"close-modal-".concat(this.actualModalName)},buttonLoading:function(){return this.isApiRequestSended?"kw-button--inactive kw-button--loading":""},actualModalName:function(){return this.name||this.modalName}},created:function(){this.actualModalName&&(window.bus.$on(this.openEvent,this.openModal),window.bus.$on(this.closeEvent,this.closeModal))},beforeDestroy:function(){this.actualModalName&&(window.bus.$off(this.openEvent,this.openModal),window.bus.$off(this.closeEvent,this.closeModal))},methods:{openModal:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&t.data&&_.forEach(t.data,(function(t,n){e.$set(e.externalData,n,t)})),this.modalOpenHandler&&this.modalOpenHandler(),this.apiRequestName="",this.isApiRequestSended=!1,this.isModalOpened=!0,this.childPopupLocal=this.externalData.childPopupLocal||!1,this.typeFile=this.externalData.typeFile||""},closeModal:function(){this.isModalOpened=!1,this.isApiRequestSended=!1,this.apiRequestName="",this.useOutOfFocus&&this.outOfFocus()},apiRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isApiRequestSended||(this.isApiRequestSended=!0,t&&(this.apiRequestName=e),this[e]())},outOfFocus:function(){var e=$("#message_body1");e.length>0&&((e=e.siblings(".trumbowyg-editor")).focus(),e.blur())}}},ot={components:{KModal:ye,SbpBank:Ce,SbpQr:tt},mixins:[nt,o.Z],computed:{titleModal:function(){return this.mobileVersion?"Выберите банк для оплаты":"Оплата по QR-коду СБП"},classModal:function(){return this.mobileVersion?"sbp-bank-modal":"sbp-qr-modal"},paymentSum:function(){return this.externalData.sum||""}}},at=(0,we.Z)(ot,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("k-modal",{class:e.classModal,attrs:{title:e.titleModal,backdrop:"dark"},model:{value:e.isModalOpened,callback:function(t){e.isModalOpened=t},expression:"isModalOpened"}},[n("sbp-qr",{directives:[{name:"show",rawName:"v-show",value:!e.mobileVersion,expression:"!mobileVersion"}],attrs:{"payment-sum":e.paymentSum}}),e._v(" "),n("sbp-bank",{directives:[{name:"show",rawName:"v-show",value:e.mobileVersion,expression:"mobileVersion"}],attrs:{"payment-sum":e.paymentSum}})],1)}),[],!1,null,null,null).exports},51900:function(e,t,n){"use strict";function o(e,t,n,o,a,i,s,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):a&&(l=r?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,{Z:function(){return o}})}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},Object.defineProperty(n,"p",{get:function(){try{if("string"!=typeof chunkCdnUrl)throw new Error("WebpackRequireFrom: 'chunkCdnUrl' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return chunkCdnUrl}catch(e){return console.error(e),"/"}},set:function(e){console.warn("WebpackRequireFrom: something is trying to override webpack public path. Ignoring the new value"+e+".")}}),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.body=$("body"),this.localStorageVar="tmp-orders-count",this.requestsName={}}var n,o,a;return n=t,a=[{key:"setItemActiveOrdersCount",value:function(e,t){var n=$(e);n.length>0&&n.each((function(e,n){var o=$(n),a=o.find(".user-active-orders-count");t?a.length>0?a.html(t):o.append('<span class="user-active-orders-count force-font--s10">'.concat(t,"</span>")):a.length>0&&a.remove()}))}},{key:"setOrderData",value:function(e,n){var o=e,a=n;void 0===o&&(o=!1,a=null);var i=".has-orders-count-as-worker",s=".has-orders-count-as-payer",r=o?a:JSON.parse(localStorage.getItem(this.localStorageVar));(o&&!1!==r||null!==r)&&(t.setItemActiveOrdersCount(s,r.asPayer),t.setItemActiveOrdersCount(i,r.asWorker),t.setItemActiveOrdersCount(".js-has-wants-count-as-payer",r.payerWants),$(s).find("span").toggleClass("red",r.hasPayerImportant)),void 0!==window.workerHasOrderImportant&&$("".concat(i," .user-active-orders-count")).toggleClass("red",window.workerHasOrderImportant)}},{key:"ajaxGetOrdersCount",value:function(e){$.ajax({url:"/api/order/getorderscount",method:"post",dataType:"json",success:function(n){t.setOrderData(!0,n),localStorage.setItem(t.localStorageVar,JSON.stringify(n)),localStorage.setItem(e,0)},error:function(){void 0!==t.body&&_.has(t.body.data,"has_active_orders_count")&&t.body.data("has_active_orders_count",!1)},complete:function(){window.active_orders_counts_processing=!1}})}}],(o=[{key:"setActiveOrdersCount",value:function(e){var n=e||!1;this.body.data("has_active_orders_count")&&!0!==n||(this.body.data("has_active_orders_count",!0),window.active_orders_counts_processing||(window.active_orders_counts_processing=!0,this.singleAjaxRequest("tmp-is-ajax-get-orders-count",t.ajaxGetOrdersCount,t.setOrderData)))}},{key:"singleAjaxRequest",value:function(e,t,n){var o=this;this.requestsName[e]||(this.requestsName[e]={ajaxData:t,staticData:n}),document.hasFocus()?(Utils.setStorageData(e,1),t(e)):(GeneralFunctions.removeTmpLocalStorageVars(),setTimeout((function(){null===localStorage.getItem(e)&&(Utils.setStorageData(e,1),t(e))}),parseInt(500*Math.random()))),window.onfocus=function(){_.forOwn(o.requestsName,(function(e,t){null===localStorage.getItem(t)?(Utils.setStorageData(t,1),e.ajaxData(t)):e.staticData()}))}}}])&&e(n.prototype,o),a&&e(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.classes={droparrow:".droparrow",dropdownbox:".dropdownbox",tooltipsterBase:".tooltipster-base"},$(document).on("mouseleave",this.classes.droparrow,(function(e){t.onHideMenu(e)})).on("click","".concat(this.classes.droparrow,".usernamebox > a"),(function(t){e.onClickTablet(t)})),$((function(){setTimeout((function(){$("body").on("mouseleave",".dropdownbox-tooltip",(function(){if(0!==$(".droparrow:hover").length)return!1;var e=$(".droparrow");isMobile()&&e.hasClass("usernamebox")&&e.find(">a").data("clicked",!1),e.find(".dropdownbox").hide()}))}))}))}var t,n,a;return t=e,a=[{key:"onClickTablet",value:function(e){var t=$(e.currentTarget);isMobile()&&!t.data("clicked")&&(t.data("clicked",!0),e.preventDefault())}}],(n=[{key:"onHideMenu",value:function(e){if($("".concat(this.classes.tooltipsterBase,":hover")).length>0)$(this.classes.tooltipsterBase).addClass("dropdownbox-tooltip");else{var t=$(e.currentTarget);isMobile()&&t.hasClass("usernamebox")&&t.find("> a").data("clicked",!1)}}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isVisible=!1,this.preventNextShow=!1,this.deleteFromBasketPage=!1,this.removedHashes=[],window.isCartAdding=!1,this.classes={cartMakeOrder:".js-cart-popup-make-order",cartPopupNotPage:".cart-popup:not(.cart-popup-page)",cartForm:".js-cart-form",cartPopupHead:".cart-popup_head"},this.init()}var t,n,o;return t=e,o=[{key:"orderBtnChangeState",value:function(e,t){var n=e.action,o=e.kwork_id,a=e.packageType,i=$('.js-add-order-to-cart, .js-make-package-order[data-is-cart="1"][data-package-type="'+a+'"]'),s=$('.js-cart-item[data-id="'+o+'"]').length;o==(t||i.data("pid"))&&("item_add"===n?i.removeClass("kw-button--green").addClass("kw-button--blue"):"item_delete"===n&&0==s&&i.addClass("kw-button--green").removeClass("kw-button--blue"))}},{key:"showSuccessBlock",value:function(e){var t=lp("kworkAddedToCart","common/cart-module",e),n='<div class="add-success-block text-center js-success-block"><div class="add-success-block__text">'+(e>1?e+" "+t:_.upperFirst(t))+"</div></div>",o=$("body");$(".js-success-block").remove(),o.append(n);var a=o.find(".js-success-block");setTimeout((function(){a.addClass("active")}),10),setTimeout((function(){a.fadeOut(500),setTimeout((function(){a.remove()}),700)}),2e3)}},{key:"getKworkCountInCart",value:function(e,t){var n=0;return _.forEach($(e).find('[data-id="'+t+'"]'),(function(e){n+=parseInt($(e).find(".cart-popup__count").html())})),n>0?n:0}}],(n=[{key:"init",value:function(){var e=this;$(document).on("mouseenter",this.classes.cartPopupNotPage,(function(){e.show()})).on("mouseleave",this.classes.cartPopupNotPage,(function(){setTimeout((function(){e.hide()}),100)})).on("click",this.classes.cartMakeOrder,(function(t){var n=$(t.target);if(n.hasClass("disabled"))return!1;n.addClass("disabled"),e.makeOrder()}));var t=new RegExp("[?&]popup=([^&#]*)").exec(window.location.href);t&&"cart"===t[1]&&(isMobile()?document.location.href=window.base_url+"/basket":this.show()),PULL_MODULE_ENABLE&&deferScript("pullJs",(function(){PullModule.on(PULL_EVENT_UPDATE_CART,(function(t){e.cartUpdate(t)}))}),window.defferJqueryPages),this.reInitJsp(),$((function(){$(document).on("click",".js-show-cart",(function(){$("html, body").animate({scrollTop:0},"slow",(function(){$(".cart-popup").find(".block-popup").fadeIn(200,"swing"),deferScript("jScrollPane",(function(){$(".cart-popup .block-popup_body").jScrollPane()})),e.updateCart(),e.refreshCartScroll(),$(".cart-popup .cart-popup_icon").addClass("active"),LazyLoad.loadImages()}))})).on("click",".js-abandoned-basket__close",(function(e){$(".js-scroll-up").removeClass("from-badge"),$(e.currentTarget).closest(".abandoned-basket").slideUp(300),$.post("/api/cart/closeabandonednotify",(function(){}))})).on("click",".js-delete-item",(function(t){e.deleteItem($(t.currentTarget).data("hash"))}))}))}},{key:"clearRemovedHashes",value:function(e){var t=$("<div/>").html(e),n=t.find(".js-cart-item");return $.each(this.removedHashes,(function(e,t){n.filter('[data-hash="'+t+'"]').remove()})),t.html()}},{key:"cartUpdate",value:function(t){var n=this;if(!(window.cartUpdateTimeLast&&t.cart_upd_time&&window.cartUpdateTimeLast>=t.cart_upd_time)){if(t.cart_upd_time&&(window.cartUpdateTimeLast=t.cart_upd_time),!Utils.isActiveWindow()||Utils.isActiveWindow()&&"item_delete"!==t.action||!this.isVisible){var o=this.clearRemovedHashes(t.cart_html);$(this.classes.cartPopupNotPage).replaceWith(o),(0!==$(".page-basket").length&&"item_add"===t.action||"item_delete"===t.action&&!this.deleteFromBasketPage)&&this.updateBasketPage(),this.updateCart(),this.reInitJsp(),this.refreshCartScroll()}this.deleteFromBasketPage=!1,this.preventNextShow?this.preventNextShow=!1:(Utils.isActiveWindow()&&("item_add"!==t.action&&"no_purse_add"!==t.action||(this.isVisible?this.show():setTimeout((function(){n.show()}),150))),e.orderBtnChangeState(t,parseInt($(".js-kwork-id").val())))}}},{key:"updateBasketPage",value:function(){var e=$(this.classes.cartPopupNotPage).find(".cart-popup_row:not(.cart-popup_head)"),t=$(".page-basket-wrapper");if(e.length>0){var n="";_.forEach(e,(function(e){var t=$(e),o=t.data("id"),a=t.data("hash"),i=t.find(".cart-popup__image a img").attr("data-src"),s=t.find(".cart-popup__name a"),r=s.attr("href"),l=s.text(),c=t.find(".cart-popup__count").text(),u=t.find(".cart-popup__sum").html(),d=t.find(".cart-popup__delete-block").html(),p='<div class="js-cart-item cart-popup_row" data-hash="'+a+'" data-id="'+o+'"><div><a href="'+r+'" class="dib v-align-m mr10"><img src="'+i+'" width="83" height="50" alt="'+l+'"></a><a href="'+r+'" class="cart-popup_text m-visible mt10">'+l+'</a></div><div class="cart-popup_count"><span class="kwork_count">'+c+"</span> "+lp("kwork","common/cart-module",c)+"</div><div>"+u+"</div>"+d+"</div>";n+=p}));var o='<div class="cart-popup cart-popup-page"><div class="block-popup" style="left: 50%;"><div class="cart-popup_row cart-popup_head"><div><div class="pl10"><b>'+l("kworksInCart","common/cart-module")+"</b></div></div><div>"+l("qty","common/cart-module")+"</div><div>"+l("total","common/cart-module")+'</div></div><div class="cart-page-items">'+n+'</div><div class="clearfix cart-popup_row_bottom"><div onclick="CartModule.makeOrder();" class="pull-right hugeGreenBtn GreenBtnStyle pull-right">'+l("orderButton","common/cart-module")+'&nbsp;(<span class="cart-popup_total-js">0</span>&nbsp;<span class="rouble">₽</span>)</div></div></div></div><p class="empty-basket-text-js pl10" style="display:none;">'+l("cartEmpty","common/cart-module")+"<br>"+l("addKworksPlaceYourOrders","common/cart-module")+"</p>";t.html(o)}else t.html('<p class="empty-basket-text-js pl10">'+l("cartEmpty","common/cart-module")+"<br>"+l("addKworksPlaceYourOrders","common/cart-module")+"</p>")}},{key:"reInitJsp",value:function(){$.fn.jScrollPane&&$(".cart-popup .block-popup_body").jScrollPane({autoReinitialise:!0})}},{key:"show",value:function(){var e=this;$(this.classes.cartPopupNotPage).find(".block-popup").fadeIn(200,"swing"),deferScript("jScrollPane",(function(){$(e.classes.cartPopupNotPage).find(".block-popup_body").jScrollPane()})),this.updateCart(),this.refreshCartScroll(),$(this.classes.cartPopupNotPage).find(".cart-popup_icon").addClass("active"),$(".js-message .block-popup").hide(),this.isVisible=!0;var t=$(".js-cart-item");t.each((function(e){LazyLoad.loadImage(t.find(".js-lazy-load-image")[e])}))}},{key:"hide",value:function(){$(this.classes.cartPopupNotPage).find(".block-popup").hide(),$(this.classes.cartPopupNotPage).find(".cart-popup_icon").removeClass("active"),this.isVisible=!1}},{key:"addItem",value:function(){var t=this,n=this.checkKworkFormData($(".js-create-order-form"));$(".abandoned-basket").slideUp(300),window.isMakeOrder||window.isCartAdding||(this.switchSending(!0),$.ajax({type:"POST",url:"/api/cart/add",data:n,success:function(n){if(n.dataLayer&&GTM.pushDataLayers(n.dataLayer),t.switchSending(!1),t.cartUpdate(n),isMobile()){var o=e.getKworkCountInCart(n.cart_html,n.kwork_id);e.showSuccessBlock(o)}}}))}},{key:"deleteItem",value:function(t){$(".js-cart-item").filter('[data-hash="'+t+'"]').remove(),this.removedHashes.push(t),0===$(".page-basket .cart-popup_row:not(.cart-popup_head)").length&&($(".empty-basket-text-js").show(),$(".page-basket .cart-popup").remove()),0===$(".cart-popup .block-popup .cart-popup_row:not(.cart-popup_head)").length&&$(".cart-popup").removeClass("active");var n="orderHash="+t;$.ajax({type:"POST",url:"/api/cart/delete",data:n,success:function(t){e.orderBtnChangeState(t,parseInt($(".js-kwork-id").val()))}}),this.updateCart(),this.refreshCartScroll(),this.deleteFromBasketPage=!0,$(".abandoned-basket").slideUp(300)}},{key:"makeOrder",value:function(){var e=this,t=$(this.classes.cartForm);t.find(".block-popup").hide(),$.ajax({type:"POST",data:t.serialize(),url:"/api/cart/order",success:function(t){t.dataLayer&&GTM.pushDataLayers(t.dataLayer),t.autoRedirectUrl?t.dataLayer?setTimeout((function(){window.location=t.autoRedirectUrl}),1e3):window.location=t.autoRedirectUrl:124===t.code&&(show_balance_popup(t.needMoney,"cart",t.operationId),$(e.classes.cartMakeOrder).removeClass("disabled"))}})}},{key:"checkKworkFormData",value:function(e){var t,n=$(".js-volume-order:first"),o=e.serialize();return 0===n.length?o:-1!==(t=(o=e.serializeArray()).map((function(e){return e.name})).indexOf("kworkcnt"))?(o.splice(t,1),o=$.param(o)):o}},{key:"setPreventNextShow",value:function(){this.preventNextShow=!0}},{key:"switchSending",value:function(e){window.isCartAdding=e,$(".js-add-order-to-cart").toggleClass("kw-button--inactive",e)}},{key:"updateCart",value:function(){var e=0,t=$(".cart-popup_total-js");_.forEach($(".header .cart-popup .cart-popup_row:not(.cart-popup_head)"),(function(t){var n,o="ru"===actor_lang?"-ru":"-en",a=$(t).find(".cart-popup__sum").attr("data-price".concat(o));a=a.replace(/\s+/g,""),n="en"===actor_lang?Math.round(100*parseFloat(a))/100:parseInt(a),e+=n})),t.text(Utils.priceFormat(e,lang)),t.data("price",e),this.setCartCountNotify(),$(".block-popup .block-popup_body .jspPane .block-popup_body_container .cart-popup__extras").not(".hidden").length>0&&($(".block-popup .cart-popup__extras").removeClass("hidden"),$(".block-popup.noextra").removeClass("noextra"))}},{key:"setCartCountNotify",value:function(){var e=this;setTimeout((function(){var t=$(".headertop-desktop .cart-popup"),n=t.find(".cart-popup_row:not(".concat(e.classes.cartPopupHead,")")).length,o=parseInt(n),a=$(".cart-popup_notify, .mobile-cart-counter"),i=!window.isPayer&&t.hasClass("cart-popup_empty");if($(".js-mobile-header-cart").toggleClass("hidden",i),0==o)return a.text(n),a.css("opacity","0"),!1;var s=a.first().text();if(parseInt(s)==o||"+"==s&&o>9)return!1;a.css("opacity","0"),o>9&&!window.IS_MARKET_APP_RU?(n="+",_.forEach(a,(function(e){var t=$(e);t.hasClass("mobile-cart-counter")||t.css("font-size","10px")}))):_.forEach(a,(function(e){var t=$(e);t.hasClass("mobile-cart-counter")||"ru"===!window.lang&&t.css("font-size","8px")})),setTimeout((function(){_.forEach(a,(function(e){var t=$(e);t.hasClass("mobile-cart-counter")?t.text(o):t.text(n)})),a.css("opacity","1")}),100)}),0)}},{key:"refreshCartScroll",value:function(){var e=$(".cart-popup:not(.cart-popup-page)"),t=$(this.classes.cartPopupHead),n=e.find(".block-popup .cart-popup_row:not(.cart-popup_head)"),o=e.find(".block-popup_body"),a=o.data("jsp");if(0===n.length)e.addClass("cart-popup_empty"),t.addClass("hidden");else{var i=0;t.removeClass("hidden"),e.removeClass("cart-popup_empty"),$.each(n,(function(e){e<=3&&(i+=$(this).outerHeight())})),n.length>4&&(i-=1),o.css({height:i+"px"})}a&&a.reinitialise()}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){var e,t,n=$(".headertop-desktop"),o=$(".js-header-menu-wrapper"),a=n.find(">.search"),i=$(".js-worker-status-hint"),s=i.find(".js-worker-status-hint-popup"),u=$(".js-dropdownbox-profile"),d=$(".js-header-new"),p=$(".js-dropdownbox-balance"),f=o.find(".js-header-menu-border-wrapper"),h=f.find(".js-header-menu-border"),m=">.header-menu",v=0,g=0;function b(){(e&&e.length>0&&e.next(".header-menu-link-more").remove(),e=o.find(m),a.removeClass("search-min"),a.find("input.header-search").attr("placeholder",l("srcLegacyJsHeaderHeaderNewJs2","legacy-translations")),e.find("> .header-menu-link").removeClass("hide"),w(),e.find(">.header-menu-link:hidden:not(.hidden)").length<1)||(e.after('<div class="header-menu-link-more"><span>'+l("srcLegacyJsHeaderHeaderNewJs3","legacy-translations")+'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="4"><path d="M3.3 2a1.5 1.5 0 0 1-3 0 1.5 1.5 0 0 1 3 0zm4.2 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 1 1 3 0zm4.2 0a1.5 1.5 0 0 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg></span><div class="header-menu-hidden"></div></div>'),w(),e.next(".header-menu-link-more").find(".header-menu-hidden").html(e.find(">.header-menu-link:hidden:not(.hidden)").clone().removeClass("hide")),a.width()<=156&&window.innerWidth<=1279&&(a.addClass("search-min").find("input.header-search").attr("placeholder",l("srcLegacyJsHeaderHeaderNewJs1","legacy-translations")),a.css("width",a.width())))}function w(){if(window.innerWidth>1220&&e.find("> .header-menu-link").length>4){var t=0;_.forEach(n.find("> div:not(:hidden):not(.hide)"),(function(e){var n=e.getBoundingClientRect().width,o=window.getComputedStyle(e);t+=n,t+=parseInt(o.marginLeft),t+=parseInt(o.marginRight)})),Math.floor(t)>n.width()&&e.find("> .header-menu-link:not(.hide)").last().addClass("hide")}}function y(e){if($(".js-header-menu-worker-orders").hasClass("hidden")){$(".js-header-menu-worker-orders").removeClass("hidden");var t=d.data("out");d.removeClass("out-".concat(t)),(t-=1)?d.addClass("out-".concat(t)):d.addClass("full"),d.data("out",t)}window.isPageLand?window.defferScripts.on("generalJs",(function(){OrdersCount.setActiveOrdersCount(!0)})):OrdersCount.setActiveOrdersCount(!0)}function k(){if(!isMobile()){var e=" >.header-menu-link:not(.hidden)",n=" >.header-menu-link-more",a=".header-events > .js-notice-inbox",i=o.find(m),s=o.find(a),r=o.find(n);timeoutRun((function(){var e=parseInt(f.css("margin-left"))?16:12,t=o.find(".notice-inbox-title:hidden").length<1?i.width()+s.width()+e:i.width();t=r.length<1?t:t+r.width()+2*e,f.css("width",t)})),timeoutRun((function(){var i=o.find(".notice-inbox-title:hidden").length<1?m+e+", "+n+", "+a:m+e+", "+n,s=".hovered";t&&t.length>0&&t.off("mouseenter").off("mouseleave"),(t=o.find(i)).on("mouseenter",(function(){var e=t.filter(s),n=$(this).position().left,o=$(this).outerWidth();e.length>0?(h.addClass("hovered"),e.position().left<n?setTimeout((function(){g=n,C()}),50):g=n):g=n,$(this).addClass("hovered"),$(this).addClass("hovered-in"),v+=o,C()})).on("mouseleave",(function(){var e=$(this);e.hasClass("hovered-in")&&(e.removeClass("hovered-in"),setTimeout((function(){e.removeClass("hovered"),v-=e.outerWidth(),C(),t.filter(s).length<1&&h.removeClass("hovered"),setTimeout((function(){t.filter(s).length<1&&h.css("left","-100%")}),150)}),100))}))}))}}function C(){h.css({left:g,width:v})}$((function(){$(".js-logout").on("click",window.initThemeColor),addScriptToQueue((function(){var t,d,f,h;(e=o.find(m)).length<1||($(".js-user-type-select").on("click",(function(){if(!$(this).hasClass("active")){var e=$(this).data("type");window.bus&&window.bus.$emit("user-type-change",e),e&&($(".js-user-type-select").toggleClass("active"),$(".chat__button_offer").toggleClass("js-individual-message__popup-link",1===e),window.actorIsPayer=1===e,window.onUserChangeTo?changeUserType(e,!1,window.onUserChangeTo):changeUserType(e,!0))}})),window.defferScripts.on("tooltipster",(function(){var e={};window.TOOLTIP_CONFIG&&(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},window.TOOLTIP_CONFIG)),e.animationDuration=500,addScriptToQueue((function(){$(".js-header-menu-link-wants-count").tooltipster(e)}))})),timeoutRun((function(){b(),setTimeout((function(){var e,t,o=a.find("input.header-search"),i=a.width();i<156&&o.attr("placeholder",l("srcLegacyJsHeaderHeaderNewJs1","legacy-translations")),a.css("width",i),o.focus((function(){(i=a.width())<156&&(t&&clearTimeout(t),a.addClass("loading"),a.addClass("animation"),a.css("width",i),n.addClass("search-open"),e=setTimeout((function(){a.removeClass("loading")}),400))})).blur((function(){e&&clearTimeout(e),setTimeout((function(){n.removeClass("search-open"),a.addClass("loading"),t=setTimeout((function(){a.removeClass("animation"),a.removeClass("loading")}),400)}),100)}))}))})),t=!1,d=!1,f=!1,h=!1,i.unbind("mousemove").unbind("mouseout").bind("mousemove",(function(){var e=this;t=!0,setTimeout((function(){t&&(s=$(e).find(".js-worker-status-hint-popup"),d||f||(f=!0,s.fadeIn(300,(function(){f=!1}))))}),400)})).bind("mouseout",(function(){t=!1,setTimeout((function(){d||h||(h=!0,s.fadeOut(300,(function(){h=!1})))}),100)})),s.unbind("mouseenter").unbind("mouseleave").bind("mouseenter",(function(){d=!0})).bind("mouseleave",(function(){d=!1,setTimeout((function(){t||h||(h=!0,s.fadeOut(300,(function(){h=!1})))}),100)})),k(),p.on("click",(function(){window.isPageLand?window.defferScripts.on("generalJs",(function(){$(".js-dropdownbox-balance").toggle(),show_balance_popup("","balance")})):($(".js-dropdownbox-balance").toggle(),show_balance_popup("","balance"))})),u.on("mouseleave",(function(){s.hide()})),$(".js-header-funds").on("mouseenter",(function(){s.hide()})),PULL_MODULE_ENABLE&&deferScript("pullJs",(function(){PullModule.on(PULL_EVENT_ACTIVE_ORDERS_COUNT_CHANGED,y),PullModule.on(PULL_EVENT_ACTIVE_WANTS_COUNT_CHANGED,y)}),window.defferJqueryPages))})),$(window).on("resize",_.throttle((function(){b(),k()}),100))})),window.updateResponsiveHeader=b}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.classes={blockedKworks:".js-blocked-kworks"},this.userInfoKworkBlocked=window.USER_KWORK_BLOCKED,this.events()}var t,n,o;return t=e,(n=[{key:"events",value:function(){var e=this;void 0!==this.userInfoKworkBlocked&&$(document).on("click",this.classes.blockedKworks,(function(t){var n;switch(t.preventDefault(),e.userInfoKworkBlocked.blockType){case"abuse":n=l("kworksBlockedPenaltyPoints","components/blocked-kworks");break;case"admin":case"take_away":case"take_away_messages":n=e.userInfoKworkBlocked.dueDate?l("kworksLockedUntil","components/blocked-kworks",[e.userInfoKworkBlocked.dueDate])+"<br>"+l("reasonKworksLocked","components/blocked-kworks",[USER_KWORK_BLOCKED.reason]):l("kworksLocked","components/blocked-kworks");break;default:n=l("kworksLocked","components/blocked-kworks")}var o='<div class="b-popup-content">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="ico-i-small position-a"></div>\n\t\t\t\t\t\t\t\t<div class="f14 ml40">\n\t\t\t\t\t\t\t\t\t'.concat(n,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>");show_popup(o)})),$((function(){var t=$(e.classes.blockedKworks),n="/new",o=void 0===window.USER_ID||""===window.USER_ID;t.is(".ico-bookmark-big")&&(n="/categories/all"),o?(t.attr("href","#"),$(document).on("click",e.classes.blockedKworks,(function(e){if(window.defferScripts.on("commonBottomDcl",(function(){isLinkClick=n})),"/terms_of_service"===window.location.pathname){e.preventDefault();var t=$(this).is(".worker");$.getJSON("/api/ban/disallowfreeregister",(function(e){show_signup("",t,e)}))}else{if(disableCurrentClick)return!1;e.preventDefault(),"true"===$(this).parents("form").attr("data-submit-post")?(show_login(!0),window.defferScripts.on("commonBottomDcl",(function(){isLinkClick=""}))):show_login()}}))):t.attr("href",n)}))}}])&&d(t.prototype,n),o&&d(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initVars(),this.init()}var t,n,o;return t=e,n=[{key:"startTimer",value:function(e){var t=this;if(!this.timer){var n=e;$(this.resendBtn).addClass("show-counter"),this.$resendCounter.html(" ("+n+" "+l("seconds","components/after-registration-events")+")"),this.$resendTitle.text(l("resendIn","components/after-registration-events")),this.timer=setInterval((function(){n>1?t.$resendCounter.html(" ("+(n-=1)+" "+l("seconds","components/after-registration-events")+")"):(t.$resendCounter.html(""),t.$resendTitle.text(l("resendEmail","components/after-registration-events")),$(t.resendBtn).removeClass("show-counter"),t.stopTimer(t.timer),t.timer=null)}),1e3)}}},{key:"stopTimer",value:function(e){clearInterval(e)}},{key:"changeEmailOrCancel",value:function(e){var t=$(e.target);t.hasClass("active")?(this.$eventContainer.removeClass("error"),this.$emailError.addClass("display--none"),this.toggleEmailInputError(),$(this.resendBtn).show(),this.$form.addClass("hidden"),t.removeClass("active").html(l("changeEmail","components/after-registration-events")),t.hasClass(this.unblockChangerClass)||this.$emailDesc.html(l("needActivateAccountDesc","components/after-registration-events"))):(t.addClass("active").html(l("cancel","components/after-registration-events")),t.hasClass(this.unblockChangerClass)||this.$emailDesc.html(l("needActivateAccountDescUpdate","components/after-registration-events")),$(this.resendBtn).hide(),this.$form.removeClass("hidden"))}},{key:"sendRequestEmailChange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.$inputEmail.attr("data-email"),o=this.$inputEmail.val().trim(),a=90;if(0===o.length)return this.$emailError.removeClass("display--none").text(l("enterEmail","components/after-registration-events")),this.$eventContainer.addClass("error"),this.toggleEmailInputError(!0),!1;if(o===n)return $(this.emailChanger).trigger("click"),!1;if(!validateEmail(o)&&o.length>0)return this.$emailError.removeClass("display--none").text(l("invalidEmail","components/after-registration-events")),this.$eventContainer.addClass("error"),this.toggleEmailInputError(!0),!1;if(o.length>a)return this.$emailError.removeClass("display--none").text(l("maxLengthError","components/after-registration-events",[a])),this.$eventContainer.addClass("error"),this.toggleEmailInputError(!0),!1;var i={email:o,csrftoken:this.csrftoken};$(this.submitBtn).addClass("kw-button--loading").prop("disabled",!0),$.ajax({type:"POST",url:"/settings/update_email",data:i,success:function(n){if(n.success){var o=n.data.email,a=o,i=$(".js-not-verified-profile-modal-email-text");t?(e.updateToStartForm(o),e.initVars()):(e.$emailTitle.html(l("needActivateAccount","components/after-registration-events")),e.$emailText.html(a).show()),i.html(o),$(e.resendBtn).show(),e.$inputEmail.val(o),e.$inputEmail.attr("data-email",o),e.$form.addClass("hidden"),e.toggleEmailInputError(),$(e.emailChanger).removeClass("active").html(l("changeEmail","components/after-registration-events")),e.timer&&e.stopTimer(e.timer),e.startTimer(40)}else n.data&&n.data.length>0?(e.$eventContainer.addClass("error"),e.$emailError.removeClass("display--none").html(_.isArray(n.data)?n.data.join("<br>"):n.data),e.toggleEmailInputError(!0)):(e.$eventContainer.addClass("error"),e.$emailError.removeClass("display--none").text(l("emailIsAlreadyUse","components/after-registration-events")),e.toggleEmailInputError(!0));$(e.submitBtn).removeClass("kw-button--loading").prop("disabled",!1)}})}},{key:"toggleEmailInputError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$inputEmail.toggleClass("input-style--error",e),$(this.submitBtn).toggleClass("kw-button--inactive",e)}},{key:"reSendEmail",value:function(){var e=this;this.timer||($(this.resendBtn).addClass("disabled kw-button--loading").prop("disabled",!0),$.ajax({type:"POST",url:"/sendemailconfirmation",data:{csrftoken:this.csrftoken},success:function(t){var n=t.data?t.data.count:40;e.startTimer(n),$(e.resendBtn).removeClass("disabled kw-button--loading").prop("disabled",!1)}}))}},{key:"unsetInputErrors",value:function(){this.$emailError.addClass("display--none"),this.$eventContainer.removeClass("error"),this.toggleEmailInputError()}},{key:"startTimerAfterReload",value:function(){""!=$(this.resendBtn).data("time-left")&&this.startTimer(parseInt($(this.resendBtn).data("time-left")))}},{key:"emailVerificationCompleted",value:function(){this.$eventContainer.addClass("display--none"),window.isEmailVerified=!0}},{key:"initVars",value:function(){this.$form=$(".js-email-form"),this.$resendCounter=$(".js-resend-counter"),this.$resendTitle=$(".js-resend-title"),this.$body=$("body"),this.$emailTitle=$(".js-email-title"),this.$emailDesc=$(".js-email-desc"),this.$emailText=$(".js-email-value"),this.$inputEmail=$(".js-email"),this.$emailError=$(".js-email-error"),this.$eventContainer=$(".js-event-message-container"),this.$emailRight=$(".js-email-right"),this.$emailHeader=$(".js-email-header"),this.resendBtn=".js-resend-btn",this.submitBtn=".js-btn-submit",this.emailChanger=".js-email-change",this.inputClearCustom=".js-input-clear-custom",this.unblockChangerClass="event-message__email-changer--unblock",this.emailUnblockClass="js-email-unblock",this.timer=null,this.csrftoken=this.$inputEmail.data("csrftoken")}},{key:"init",value:function(){var e=this;if(this.$eventContainer.data("padding-bottom",parseInt(this.$eventContainer.css("padding-bottom"))),$(this.resendBtn).removeClass("disabled pointer-en").addClass("kw-button--gray-border"),this.$form.length>0&&(this.$body.on("click",this.emailChanger,(function(t){e.changeEmailOrCancel(t)})).on("click",this.submitBtn,(function(){return e.sendRequestEmailChange($(e.submitBtn).hasClass(e.emailUnblockClass)),!1})).on("click",this.resendBtn,(function(){e.reSendEmail()})).on("click",this.inputClearCustom,(function(e){$(e.target).siblings("input").val("").trigger("input")})),this.$inputEmail.on("input",(function(){e.unsetInputErrors()})),this.startTimerAfterReload(),PULL_MODULE_ENABLE)){var t=this;PullModule.on(EMAIL_VERIFIED,(function(){t.emailVerificationCompleted()}))}}},{key:"updateToStartForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t='<span class="event-message__email-left-title js-email-title m-dib">'.concat(l("needActivateAccount","components/after-registration-events"),"</span>"),n=e?' — <span class="event-message__email-left-value js-email-value breakwords">'.concat(e,"</span>"):"";this.$emailHeader.html(t+n),$(this.submitBtn).removeClass(this.emailUnblockClass),$(this.emailChanger).removeClass(this.unblockChangerClass),$(this.$emailDesc).html(l("needActivateAccountDesc","components/after-registration-events"));var o='\n\t\t\t<button\n\t\t\t\tdata-time-left="0"\n\t\t\t\ttype="button"\n\t\t\t\tclass="event-message__email-button kw-button kw-button--size-40 kw-button--gray-border js-resend-btn nowrap"\n\t\t\t>\n\t\t\t\t<span class="js-resend-title">'.concat(l("resendEmail","components/after-registration-events"),'</span><span class="js-resend-counter"></span>\n\t\t\t</button>\n\t\t');$(this.$emailRight).append(o)}}],n&&f(t.prototype,n),o&&f(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.OrdersCount=new t,setTimeout((function(){new a})),setTimeout((function(){n(63812)})),setTimeout((function(){window.CartModule=new s})),setTimeout((function(){n(18834)})),setTimeout((function(){n(70353)})),setTimeout((function(){n(5957),Vue.component("sbp-payment",n(23924).Z);var e=document.getElementById("app-header");e&&(window.appHeader=new Vue({el:e}))})),setTimeout((function(){n(64763)})),setTimeout((function(){n(88417)})),setTimeout((function(){new p})),setTimeout((function(){u()})),setTimeout((function(){window.AfterRegistrationEvents=new h})),setTimeout((function(){n(63857)})),setTimeout((function(){n(25605)}))}()}();